<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>参与我们 | RSSHub</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/logo.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ff8549">
    <meta name="description" content="🍰 万物皆可 RSS">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#fff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <link rel="preload" href="/assets/css/0.styles.08a30f3e.css" as="style"><link rel="preload" href="/assets/js/app.3478587c.js" as="script"><link rel="preload" href="/assets/js/4.7e00e1d6.js" as="script"><link rel="preload" href="/assets/js/55.03826de0.js" as="script"><link rel="preload" href="/assets/js/9.b0a34855.js" as="script"><link rel="preload" href="/assets/js/5.e3683046.js" as="script"><link rel="prefetch" href="/assets/js/1.01c1a840.js"><link rel="prefetch" href="/assets/js/10.cc54c48d.js"><link rel="prefetch" href="/assets/js/11.163b9b79.js"><link rel="prefetch" href="/assets/js/12.7f49affb.js"><link rel="prefetch" href="/assets/js/13.37475059.js"><link rel="prefetch" href="/assets/js/14.d674a436.js"><link rel="prefetch" href="/assets/js/15.5eaa5792.js"><link rel="prefetch" href="/assets/js/16.8cd0a356.js"><link rel="prefetch" href="/assets/js/17.72e99fa7.js"><link rel="prefetch" href="/assets/js/18.aab4cce7.js"><link rel="prefetch" href="/assets/js/19.e341b88f.js"><link rel="prefetch" href="/assets/js/20.c19c564e.js"><link rel="prefetch" href="/assets/js/21.bc277a4a.js"><link rel="prefetch" href="/assets/js/22.edd1e5e2.js"><link rel="prefetch" href="/assets/js/23.7c1fe2b6.js"><link rel="prefetch" href="/assets/js/24.c9f5e28b.js"><link rel="prefetch" href="/assets/js/25.84f330ef.js"><link rel="prefetch" href="/assets/js/26.5a416922.js"><link rel="prefetch" href="/assets/js/27.0fd65e69.js"><link rel="prefetch" href="/assets/js/28.a0ed42ac.js"><link rel="prefetch" href="/assets/js/29.42deadda.js"><link rel="prefetch" href="/assets/js/30.a9041f4d.js"><link rel="prefetch" href="/assets/js/31.6870108c.js"><link rel="prefetch" href="/assets/js/32.c2501ae3.js"><link rel="prefetch" href="/assets/js/33.72996b6b.js"><link rel="prefetch" href="/assets/js/34.a4520322.js"><link rel="prefetch" href="/assets/js/35.a647505e.js"><link rel="prefetch" href="/assets/js/36.307e6c89.js"><link rel="prefetch" href="/assets/js/37.6e558225.js"><link rel="prefetch" href="/assets/js/38.89028f18.js"><link rel="prefetch" href="/assets/js/39.0e6e7eae.js"><link rel="prefetch" href="/assets/js/40.7e97b4cb.js"><link rel="prefetch" href="/assets/js/41.f1741c94.js"><link rel="prefetch" href="/assets/js/42.e39823d5.js"><link rel="prefetch" href="/assets/js/43.3aab0084.js"><link rel="prefetch" href="/assets/js/44.43dc4fed.js"><link rel="prefetch" href="/assets/js/45.aef33e31.js"><link rel="prefetch" href="/assets/js/46.f32f45ff.js"><link rel="prefetch" href="/assets/js/47.8d8537d1.js"><link rel="prefetch" href="/assets/js/48.4fd17982.js"><link rel="prefetch" href="/assets/js/49.41f252f8.js"><link rel="prefetch" href="/assets/js/50.7454b027.js"><link rel="prefetch" href="/assets/js/51.35beff93.js"><link rel="prefetch" href="/assets/js/52.814f8e7d.js"><link rel="prefetch" href="/assets/js/53.55990165.js"><link rel="prefetch" href="/assets/js/54.aaa38339.js"><link rel="prefetch" href="/assets/js/56.f18aa3a1.js"><link rel="prefetch" href="/assets/js/57.62ca241f.js"><link rel="prefetch" href="/assets/js/58.77bb30c5.js"><link rel="prefetch" href="/assets/js/59.24e2aaad.js"><link rel="prefetch" href="/assets/js/6.e0b96f8a.js"><link rel="prefetch" href="/assets/js/60.4095a610.js"><link rel="prefetch" href="/assets/js/61.c8fe1f0c.js"><link rel="prefetch" href="/assets/js/62.b2734212.js"><link rel="prefetch" href="/assets/js/63.66ef73db.js"><link rel="prefetch" href="/assets/js/64.51888ff0.js"><link rel="prefetch" href="/assets/js/65.b1510af6.js"><link rel="prefetch" href="/assets/js/66.edff1723.js"><link rel="prefetch" href="/assets/js/67.c3029815.js"><link rel="prefetch" href="/assets/js/68.f1bbfa0e.js"><link rel="prefetch" href="/assets/js/69.1c723f20.js"><link rel="prefetch" href="/assets/js/7.ea0c3966.js"><link rel="prefetch" href="/assets/js/70.63cc1a12.js"><link rel="prefetch" href="/assets/js/71.7c8bc6dd.js"><link rel="prefetch" href="/assets/js/72.9076e206.js"><link rel="prefetch" href="/assets/js/73.e483ddb3.js"><link rel="prefetch" href="/assets/js/74.a6cc0b35.js"><link rel="prefetch" href="/assets/js/8.125bf902.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.d2abf963.js">
    <link rel="stylesheet" href="/assets/css/0.styles.08a30f3e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">RSSHub</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/joinus/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  参与我们
</a></div><div class="nav-item"><a href="/install/" class="nav-link">
  部署
</a></div><div class="nav-item"><a href="/support/" class="nav-link">
  支持 RSSHub
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/joinus/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/en/joinus/" class="nav-link">
  English
</a></li></ul></div></div> <a href="https://github.com/DIYgod/RSSHub" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/joinus/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  参与我们
</a></div><div class="nav-item"><a href="/install/" class="nav-link">
  部署
</a></div><div class="nav-item"><a href="/support/" class="nav-link">
  支持 RSSHub
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/joinus/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/en/joinus/" class="nav-link">
  English
</a></li></ul></div></div> <a href="https://github.com/DIYgod/RSSHub" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>参与我们</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/joinus/#can-yu-tao-lun" class="sidebar-link">参与讨论</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/joinus/#ti-jiao-xin-de-rsshub-gui-ze" class="sidebar-link">提交新的 RSSHub 规则</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/joinus/#ti-jiao-xin-de-rsshub-gui-ze-tiao-shi" class="sidebar-link">调试</a></li><li class="sidebar-sub-header"><a href="/joinus/#ti-jiao-xin-de-rsshub-gui-ze-tian-jia-jiao-ben-lu-you" class="sidebar-link">添加脚本路由</a></li><li class="sidebar-sub-header"><a href="/joinus/#ti-jiao-xin-de-rsshub-gui-ze-bian-xie-jiao-ben" class="sidebar-link">编写脚本</a></li><li class="sidebar-sub-header"><a href="/joinus/#ti-jiao-xin-de-rsshub-gui-ze-tian-jia-jiao-ben-wen-dang" class="sidebar-link">添加脚本文档</a></li></ul></li><li><a href="/joinus/#ti-jiao-xin-de-rsshub-radar-gui-ze" class="sidebar-link">提交新的 RSSHub Radar 规则</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/joinus/#ti-jiao-xin-de-rsshub-radar-gui-ze-tiao-shi" class="sidebar-link">调试</a></li><li class="sidebar-sub-header"><a href="/joinus/#ti-jiao-xin-de-rsshub-radar-gui-ze-bian-xie-gui-ze" class="sidebar-link">编写规则</a></li><li class="sidebar-sub-header"><a href="/joinus/#ti-jiao-xin-de-rsshub-radar-gui-ze-rssbud" class="sidebar-link">RSSBud</a></li><li class="sidebar-sub-header"><a href="/joinus/#ti-jiao-xin-de-rsshub-radar-gui-ze-bu-chong-wen-dang" class="sidebar-link">补充文档</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1>参与我们</h1> <p>如果有任何想法或需求，可以在 <a href="https://github.com/DIYgod/RSSHub/issues" target="_blank" rel="noopener noreferrer">issue<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 中告诉我们，同时我们欢迎各种 pull requests</p> <h2 id="can-yu-tao-lun"><a href="#can-yu-tao-lun" class="header-anchor">#</a> 参与讨论</h2> <ol><li><a href="https://t.me/rsshub" target="_blank" rel="noopener noreferrer">Telegram 群<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/DIYgod/RSSHub/issues" target="_blank" rel="noopener noreferrer">GitHub Issues<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ol> <h2 id="ti-jiao-xin-de-rsshub-gui-ze"><a href="#ti-jiao-xin-de-rsshub-gui-ze" class="header-anchor">#</a> 提交新的 RSSHub 规则</h2> <p>开始编写 RSS 源前请确认源站没有提供 RSS，部分网页会在 HTML 头部包含 type 为 <code>application/atom+xml</code> 或 <code>application/rss+xml</code> 的 link 元素来指明 RSS 链接</p> <h3 id="ti-jiao-xin-de-rsshub-gui-ze-tiao-shi"><a href="#ti-jiao-xin-de-rsshub-gui-ze-tiao-shi" class="header-anchor">#</a> 调试</h3> <p>首先 <code>yarn</code> 或者 <code>npm install</code> 安装依赖，然后执行 <code>yarn dev</code> 或者 <code>npm run dev</code>，打开 <code>http://localhost:1200</code> 就可以看到效果，修改文件也会自动刷新</p> <h3 id="ti-jiao-xin-de-rsshub-gui-ze-tian-jia-jiao-ben-lu-you"><a href="#ti-jiao-xin-de-rsshub-gui-ze-tian-jia-jiao-ben-lu-you" class="header-anchor">#</a> 添加脚本路由</h3> <p>在 <a href="https://github.com/DIYgod/RSSHub/blob/master/lib/router.js" target="_blank" rel="noopener noreferrer">/lib/router.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 里添加路由</p> <h3 id="ti-jiao-xin-de-rsshub-gui-ze-bian-xie-jiao-ben"><a href="#ti-jiao-xin-de-rsshub-gui-ze-bian-xie-jiao-ben" class="header-anchor">#</a> 编写脚本</h3> <p>在 <a href="https://github.com/DIYgod/RSSHub/tree/master/lib/routes" target="_blank" rel="noopener noreferrer">/lib/routes/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 中的路由对应路径下创建新的 js 脚本：</p> <h4 id="ti-jiao-xin-de-rsshub-gui-ze-bian-xie-jiao-ben-huo-qu-yuan-shu-ju"><a href="#ti-jiao-xin-de-rsshub-gui-ze-bian-xie-jiao-ben-huo-qu-yuan-shu-ju" class="header-anchor">#</a> 获取源数据</h4> <ul><li><p>获取源数据的主要手段为使用 <a href="https://github.com/sindresorhus/got" target="_blank" rel="noopener noreferrer">got<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 发起 HTTP 请求（请求接口或请求网页）获取数据</p></li> <li><p>个别情况需要使用 <a href="https://github.com/GoogleChrome/puppeteer" target="_blank" rel="noopener noreferrer">puppeteer<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 模拟浏览器渲染目标页面并获取数据</p></li> <li><p>返回的数据一般为 JSON 或 HTML 格式</p></li> <li><p>对于 HTML 格式的数据，使用 <a href="https://github.com/cheeriojs/cheerio" target="_blank" rel="noopener noreferrer">cheerio<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 进行处理</p></li> <li><p>以下三种获取数据方法按 <strong>「推荐优先级」</strong> 排列：</p> <ol><li><strong>使用 got 从接口获取数据</strong></li></ol> <p>样例：<a href="https://github.com/DIYgod/RSSHub/blob/master/lib/routes/bilibili/coin.js" target="_blank" rel="noopener noreferrer">/lib/routes/bilibili/coin.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>使用 got 通过数据源提供的 API 接口获取数据：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 发起 HTTP GET 请求</span>
<span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">got</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    method<span class="token operator">:</span> <span class="token string">'get'</span><span class="token punctuation">,</span>
    url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://api.bilibili.com/x/space/coin/video?vmid=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>uid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;jsonp=jsonp</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    headers<span class="token operator">:</span> <span class="token punctuation">{</span>
        Referer<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://space.bilibili.com/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>uid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> data <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">;</span> <span class="token comment">// response.data 为 HTTP GET 请求返回的数据对象</span>
<span class="token comment">// 这个对象中包含了数组名为 data，所以 response.data.data 则为需要的数据</span>
</code></pre></div><p>返回的数据样例之一（response.data.data[0]）：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;aid&quot;</span><span class="token operator">:</span> <span class="token number">33614333</span><span class="token punctuation">,</span>
    <span class="token property">&quot;videos&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tid&quot;</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tname&quot;</span><span class="token operator">:</span> <span class="token string">&quot;宅舞&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;copyright&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;pic&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://i0.hdslb.com/bfs/archive/5649d7fe6ff7f7b431300fc1a0db80d3f174cacd.jpg&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;【赤九玖】响喜乱舞【和我一起狂舞吧，团长大人(✧◡✧)】&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;pubdate&quot;</span><span class="token operator">:</span> <span class="token number">1539259203</span><span class="token punctuation">,</span>
    <span class="token property">&quot;ctime&quot;</span><span class="token operator">:</span> <span class="token number">1539249536</span><span class="token punctuation">,</span>
    <span class="token property">&quot;desc&quot;</span><span class="token operator">:</span> <span class="token string">&quot;编舞出处：av31984673\n真心好喜欢这个舞和这首歌，居然恰巧被邀请跳了，感谢《苍之纪元》官方的邀请。这次cos的是游戏的新角色缪斯。然而时间有限很多地方还有很多不足。也没跳够，以后私下还会继续练习，希望能学到更多动作，也能为了有机会把它跳的更好。 \n摄影：绯山圣瞳九命猫 \n后期：炉火&quot;</span>
    <span class="token comment">// 省略部分数据</span>
<span class="token punctuation">}</span>
</code></pre></div><p>对数据进行进一步处理，生成符合 RSS 规范的对象，把获取的标题、链接、描述、发布时间等数据赋值给 ctx.state.data, <a href="#%E7%94%9F%E6%88%90-rss-%E6%BA%90">生成 RSS 源</a>：</p> <div class="language-js extra-class"><pre class="language-js"><code>ctx<span class="token punctuation">.</span>state<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 源标题</span>
    title<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 的 bilibili 投币视频</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token comment">// 源链接</span>
    link<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://space.bilibili.com/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>uid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token comment">// 源说明</span>
    description<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 的 bilibili 投币视频</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token comment">//遍历此前获取的数据</span>
    item<span class="token operator">:</span> data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">// 文章标题</span>
        title<span class="token operator">:</span> item<span class="token punctuation">.</span>title<span class="token punctuation">,</span>
        <span class="token comment">// 文章正文</span>
        description<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>desc<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;br&gt;&lt;img src=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>pic<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        <span class="token comment">// 文章发布时间</span>
        pubDate<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>time <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUTCString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">// 文章链接</span>
        link<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://www.bilibili.com/video/av</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>aid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 至此本路由结束</span>
</code></pre></div><ol start="2"><li><strong>使用 got 从 HTML 获取数据</strong></li></ol> <p>有时候数据是写在 HTML 里的，<strong>没有接口供我们调用</strong>，样例: <a href="https://github.com/DIYgod/RSSHub/blob/master/lib/routes/douban/explore.js" target="_blank" rel="noopener noreferrer">/lib/routes/douban/explore.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>使用 got 请求 HTML 数据：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 发起 HTTP GET 请求</span>
<span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">got</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    method<span class="token operator">:</span> <span class="token string">'get'</span><span class="token punctuation">,</span>
    url<span class="token operator">:</span> <span class="token string">'https://www.douban.com/explore'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> data <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">;</span> <span class="token comment">// response.data 为 HTTP GET 请求返回的 HTML，也就是简书首页的所有 HTML</span>
</code></pre></div><p>使用 cheerio 解析返回的 HTML:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> $ <span class="token operator">=</span> cheerio<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 使用 cheerio 加载返回的 HTML</span>
<span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'div[data-item_id]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 使用 cheerio 选择器，选择带有 data-item_id 属性的所有 div 元素，返回 cheerio node 对象数组</span>

<span class="token comment">// 注：每一个 cheerio node 对应一个 HTML DOM</span>
<span class="token comment">// 注：cheerio 选择器与 jquery 选择器几乎相同</span>
<span class="token comment">// 参考 cheerio 文档：https://cheerio.js.org/</span>
</code></pre></div><p>使用 map 遍历数组，解析出每一个 item 的结果</p> <div class="language-js extra-class"><pre class="language-js"><code>ctx<span class="token punctuation">.</span>state<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token string">'豆瓣-浏览发现'</span><span class="token punctuation">,</span>
    link<span class="token operator">:</span> <span class="token string">'https://www.douban.com/explore'</span><span class="token punctuation">,</span>
    item<span class="token operator">:</span>
        list <span class="token operator">&amp;&amp;</span>
        list
            <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">index<span class="token punctuation">,</span> item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                item <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
                itemPicUrl <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'a.cover'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'background-image:url('</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">')'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token punctuation">{</span>
                    title<span class="token operator">:</span> item<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.title a'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    description<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">作者：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.usr-pic a'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">last</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;br&gt;描述：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.content p'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;br&gt;&lt;img src=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>itemPicUrl<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
                    link<span class="token operator">:</span> item<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.title a'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'href'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 至此本路由结束</span>
</code></pre></div><ol start="3"><li><strong>使用 puppeteer 渲染页面获取数据</strong></li></ol> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>由于此方法性能较差且消耗较多资源，使用前请确保以上两种方法无法获取数据，不然将导致您的 pull requests 被拒绝！</p></div> <p>部分网站<strong>没有接口供调用，且页面有加密</strong>
样例：<a href="https://github.com/DIYgod/RSSHub/blob/master/lib/routes/sspai/series.js" target="_blank" rel="noopener noreferrer">/lib/routes/sspai/series.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 使用 RSSHub 提供的 puppeteer 工具类，初始化 Chrome 进程</span>
<span class="token keyword">const</span> browser <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@/utils/puppeteer'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 创建一个新的浏览器页面</span>
<span class="token keyword">const</span> page <span class="token operator">=</span> <span class="token keyword">await</span> browser<span class="token punctuation">.</span><span class="token function">newPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 访问指定的链接</span>
<span class="token keyword">const</span> link <span class="token operator">=</span> <span class="token string">'https://sspai.com/series'</span><span class="token punctuation">;</span>
<span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">goto</span><span class="token punctuation">(</span>link<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 渲染目标网页</span>
<span class="token keyword">const</span> html <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        <span class="token comment">// 选取渲染后的 HTML</span>
        document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div.new-series-wrapper'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 关闭浏览器进程</span>
browser<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>使用 cheerio 解析返回的 HTML:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> $ <span class="token operator">=</span> cheerio<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 使用 cheerio 加载返回的 HTML</span>
<span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'div.item'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 使用 cheerio 选择器，选择所有 &lt;div class=&quot;item&quot;&gt; 元素，返回 cheerio node 对象数组</span>
</code></pre></div><p>赋值给 <code>ctx.state.data</code></p> <div class="language-js extra-class"><pre class="language-js"><code>ctx<span class="token punctuation">.</span>state<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token string">'少数派 -- 最新上架付费专栏'</span><span class="token punctuation">,</span>
    link<span class="token punctuation">,</span>
    description<span class="token operator">:</span> <span class="token string">'少数派 -- 最新上架付费专栏'</span><span class="token punctuation">,</span>
    item<span class="token operator">:</span> list
        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">i<span class="token punctuation">,</span> item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token comment">// 文章标题</span>
            title<span class="token operator">:</span> <span class="token function">$</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.item-title a'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">// 文章链接</span>
            link<span class="token operator">:</span> url<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>link<span class="token punctuation">,</span> <span class="token function">$</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.item-title a'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'href'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">// 文章作者</span>
            author<span class="token operator">:</span> <span class="token function">$</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.item-author'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// cheerio get() 方法将 cheerio node 对象数组转换为 node 对象数组</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 至此本路由结束</span>

<span class="token comment">// 注：由于此路由只是起到一个新专栏上架提醒的作用，无法访问付费文章，因此没有文章正文</span>
</code></pre></div><ol start="4"><li><strong>使用通用配置型路由</strong></li></ol> <p>很大一部分网站是可以通过一个配置范式来生成 RSS 的。<br>
通用配置即通过 cheerio（<strong>CSS 选择器、jQuery 函数</strong>）读取 json 数据来简便的生成 RSS。</p> <p>首先我们需要几个数据：</p> <ol><li>RSS 来源链接</li> <li>数据来源链接</li> <li>RSS 标题（非 item 标题）</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> buildData <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@/utils/common-config'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span>state<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">buildData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        link<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// RSS来源链接</span>
        url<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 数据来源链接</span>
        title<span class="token operator">:</span> <span class="token string">'%title%'</span><span class="token punctuation">,</span> <span class="token comment">// 这里使用了变量，形如 **%xxx%** 这样的会被解析为变量，值为 **params** 下的同名值</span>
        params<span class="token operator">:</span> <span class="token punctuation">{</span>
            title<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// RSS标题</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>至此，我们的 RSS 还没有任何内容，内容需要由<code>item</code>完成
下面为一个实例</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> buildData <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@/utils/common-config'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> link <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://www.uraaka-joshi.com/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span>state<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">buildData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        link<span class="token punctuation">,</span>
        url<span class="token operator">:</span> link<span class="token punctuation">,</span>
        title<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">%title%</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        params<span class="token operator">:</span> <span class="token punctuation">{</span>
            title<span class="token operator">:</span> <span class="token string">'裏垢女子まとめ'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        item<span class="token operator">:</span> <span class="token punctuation">{</span>
            item<span class="token operator">:</span> <span class="token string">'.content-main .stream .stream-item'</span><span class="token punctuation">,</span>
            title<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">$('.post-account-group').text() + ' - %title%'</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token comment">// 只支持$().xxx()这样的js语句，也足够使用</span>
            link<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">$('.post-account-group').attr('href')</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token comment">// .text()代表获取元素的文本，.attr()表示获取指定属性</span>
            description<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">$('.post .context').html()</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token comment">// .html()代表获取元素的html代码</span>
            pubDate<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">new Date($('.post-time').attr('datetime')).toUTCString()</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token comment">// 日期的格式多种多样，可以尝试使用**/utils/date**</span>
            guid<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">new Date($('.post-time').attr('datetime')).getTime()</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token comment">// guid必须唯一，这是RSS的不同item的标志</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>至此我们完成了一个最简单的路由</p></li></ul> <hr> <h4 id="ti-jiao-xin-de-rsshub-gui-ze-bian-xie-jiao-ben-shi-yong-huan-cun"><a href="#ti-jiao-xin-de-rsshub-gui-ze-bian-xie-jiao-ben-shi-yong-huan-cun" class="header-anchor">#</a> 使用缓存</h4> <p>所有路由都有一个缓存，全局缓存时间在 <code>lib/config.js</code> 里设定，但某些接口返回的内容更新频率较低，这时应该给这些数据设置一个更长的缓存时间，比如需要额外请求的全文内容</p> <p>例如 bilibili 专栏 需要获取文章全文：<a href="https://github.com/DIYgod/RSSHub/blob/master/lib/routes/bilibili/followings_article.js" target="_blank" rel="noopener noreferrer">/lib/routes/bilibili/followings_article.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>由于无法从一个接口获取所有文章的全文，所以每篇文章都需要单独请求一次，而这些数据一般是不变的，应该把这些数据保存到缓存里，避免每次访问路由都去请求那么多接口</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> description <span class="token operator">=</span> <span class="token keyword">await</span> ctx<span class="token punctuation">.</span>cache<span class="token punctuation">.</span><span class="token function">tryGet</span><span class="token punctuation">(</span>link<span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> got<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>link<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> $ <span class="token operator">=</span> cheerio<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">i<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">$</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">,</span> <span class="token function">$</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'data-src'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.article-holder'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>tryGet 的实现可以看<a href="https://github.com/DIYgod/RSSHub/blob/master/lib/middleware/cache.js#L128" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，第一个参数为缓存的 key，第二个参数为缓存数据获取方法，第三个参数为缓存时间，正常情况不应该传入，缓存时间默认为 <a href="/install/#缓存配置">CACHE_CONTENT_EXPIRE</a>，且每次访问缓存会重新计算过期时间</p> <hr> <h4 id="ti-jiao-xin-de-rsshub-gui-ze-bian-xie-jiao-ben-sheng-cheng-rss-yuan"><a href="#ti-jiao-xin-de-rsshub-gui-ze-bian-xie-jiao-ben-sheng-cheng-rss-yuan" class="header-anchor">#</a> 生成 RSS 源</h4> <p>获取到的数据赋给 ctx.state.data, 然后数据会经过 <a href="https://github.com/DIYgod/RSSHub/blob/master/lib/middleware/template.js" target="_blank" rel="noopener noreferrer">template.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 中间件处理，最后传到 <a href="https://github.com/DIYgod/RSSHub/blob/master/lib/views/rss.art" target="_blank" rel="noopener noreferrer">/lib/views/rss.art<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 来生成最后的 RSS 结果，每个字段的含义如下：</p> <div class="language-js extra-class"><pre class="language-js"><code>ctx<span class="token punctuation">.</span>state<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 项目的标题</span>
    link<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 指向项目的链接</span>
    description<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 描述项目</span>
    language<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 频道语言</span>
    allowEmpty<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 默认 false，设为 true 可以允许 item 为空</span>
    item<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// 其中一篇文章或一项内容</span>
        <span class="token punctuation">{</span>
            title<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 文章标题</span>
            author<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 文章作者</span>
            category<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 文章分类</span>
            <span class="token comment">// category: [''], // 多个分类</span>
            description<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 文章摘要或全文</span>
            pubDate<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 文章发布时间</span>
            guid<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 文章唯一标示, 必须唯一, 可选, 默认为文章链接</span>
            link<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 指向文章的链接</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="ti-jiao-xin-de-rsshub-gui-ze-bian-xie-jiao-ben-sheng-cheng-rss-yuan-bo-ke-yuan"><a href="#ti-jiao-xin-de-rsshub-gui-ze-bian-xie-jiao-ben-sheng-cheng-rss-yuan-bo-ke-yuan" class="header-anchor">#</a> 播客源</h5> <p>用于音频类 RSS，<strong>额外</strong>添加这些字段能使你的 RSS 被泛用型播客软件订阅：</p> <div class="language-js extra-class"><pre class="language-js"><code>ctx<span class="token punctuation">.</span>state<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token punctuation">{</span>
    itunes_author<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 主播名字, 必须填充本字段才会被视为播客</span>
    itunes_category<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 播客分类</span>
    image<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 专辑图片, 作为播客源时必填</span>
    item<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            itunes_item_image<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 每个track单独的图片</span>
            enclosure_url<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 音频链接</span>
            enclosure_length<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 时间戳 (播放长度) , 一般是秒数，可选</span>
            enclosure_type<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// [.mp3就填'audio/mpeg'] [.m4a就填'audio/x-m4a'] [.mp4就填'video/mp4'], 或其他类型.</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="ti-jiao-xin-de-rsshub-gui-ze-bian-xie-jiao-ben-sheng-cheng-rss-yuan-bt-ci-li-yuan"><a href="#ti-jiao-xin-de-rsshub-gui-ze-bian-xie-jiao-ben-sheng-cheng-rss-yuan-bt-ci-li-yuan" class="header-anchor">#</a> BT / 磁力源</h5> <p>用于下载类 RSS，<strong>额外</strong>添加这些字段能使你的 RSS 被 BT 客户端识别并自动下载：</p> <div class="language-js extra-class"><pre class="language-js"><code>ctx<span class="token punctuation">.</span>state<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token punctuation">{</span>
    item<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            enclosure_url<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 磁力链接</span>
            enclosure_length<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 时间戳 (播放长度) , 一般是秒数，可选</span>
            enclosure_type<span class="token operator">:</span> <span class="token string">'application/x-bittorrent'</span><span class="token punctuation">,</span> <span class="token comment">// 固定为 'application/x-bittorrent'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="ti-jiao-xin-de-rsshub-gui-ze-bian-xie-jiao-ben-sheng-cheng-rss-yuan-mei-ti-yuan"><a href="#ti-jiao-xin-de-rsshub-gui-ze-bian-xie-jiao-ben-sheng-cheng-rss-yuan-mei-ti-yuan" class="header-anchor">#</a> 媒体源</h5> <p><strong>额外</strong>添加这些字段能使你的 RSS 被支持 <a href="http://www.rssboard.org/media-rss" target="_blank" rel="noopener noreferrer">Media RSS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 的软件订阅：</p> <p>示例：</p> <div class="language-js extra-class"><pre class="language-js"><code>ctx<span class="token punctuation">.</span>state<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token punctuation">{</span>
    item<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            media<span class="token operator">:</span> <span class="token punctuation">{</span>
                content<span class="token operator">:</span> <span class="token punctuation">{</span>
                    url<span class="token operator">:</span> post<span class="token punctuation">.</span>file_url<span class="token punctuation">,</span>
                    type<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">image/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>mime<span class="token punctuation">[</span>post<span class="token punctuation">.</span>file_ext<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                thumbnail<span class="token operator">:</span> <span class="token punctuation">{</span>
                    url<span class="token operator">:</span> post<span class="token punctuation">.</span>preview_url<span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><hr> <h3 id="ti-jiao-xin-de-rsshub-gui-ze-tian-jia-jiao-ben-wen-dang"><a href="#ti-jiao-xin-de-rsshub-gui-ze-tian-jia-jiao-ben-wen-dang" class="header-anchor">#</a> 添加脚本文档</h3> <ol><li><p>更新 <a href="https://github.com/DIYgod/RSSHub/blob/master/docs/" target="_blank" rel="noopener noreferrer">文档 (/docs/) <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 目录内对应的文档，可以执行 <code>npm run docs:dev</code> 查看文档效果</p> <ul><li><p>文档采用 vue 组件形式，格式如下：</p> <ul><li><code>author</code>: 路由作者，多位作者使用单个空格分隔</li> <li><code>example</code>: 路由举例</li> <li><code>path</code>: 路由路径</li> <li><code>:paramsDesc</code>: 路由参数说明，数组，支持 markdown
<ol><li>参数说明必须对应其在路径中出现的顺序</li> <li>如缺少说明将会导致<code>npm run docs:dev</code>报错</li> <li>说明中的 <code>'</code> <code>&quot;</code> 必须通过反斜杠转义 <code>\'</code> <code>\&quot;</code></li> <li>不必在说明中标注<code>可选 / 必选</code>，组件会根据路由<code>?</code>自动判断</li></ol></li></ul></li> <li><p>文档样例：</p> <ol><li>无参数:</li></ol> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Route</span> <span class="token attr-name">author</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>HenryQW<span class="token punctuation">&quot;</span></span> <span class="token attr-name">example</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/sspai/series<span class="token punctuation">&quot;</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/sspai/series<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>结果预览：</p> <hr> <div id="/sspai/series" class="routeBlock"><p class="badge"><!----> <!----> <!----> <!----> <!----> <!----> <!----></p> <p class="author">
    作者: <a href="https://github.com/HenryQW" target="_blank"> @HenryQW </a></p> <p class="example"><span>举例:</span> <a href="https://rsshub.app/sspai/series" target="_blank">https://rsshub.app/sspai/series</a> <img src="https://img.shields.io/website?label=status&amp;style=flat-square&amp;url=https%3A%2F%2Frsshub.app%2Fsspai%2Fseries"></p> <p class="path">
    路由: <code>/sspai/series</code></p> <div><p>参数: 无</p></div> </div> <hr> <ol start="2"><li>多参数：</li></ol> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Route</span> <span class="token attr-name">author</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>HenryQW<span class="token punctuation">&quot;</span></span> <span class="token attr-name">example</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/github/issue/DIYgod/RSSHub<span class="token punctuation">&quot;</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/github/issue/:user/:repo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:paramsDesc</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[<span class="token punctuation">'</span>用户名<span class="token punctuation">'</span>, <span class="token punctuation">'</span>仓库名<span class="token punctuation">'</span>]<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>结果预览：</p> <hr> <div id="/github/issue/:user/:repo" class="routeBlock"><p class="badge"><!----> <!----> <!----> <!----> <!----> <!----> <!----></p> <p class="author">
    作者: <a href="https://github.com/HenryQW" target="_blank"> @HenryQW </a></p> <p class="example"><span>举例:</span> <a href="https://rsshub.app/github/issue/DIYgod/RSSHub" target="_blank">https://rsshub.app/github/issue/DIYgod/RSSHub</a> <img src="https://img.shields.io/website?label=status&amp;style=flat-square&amp;url=https%3A%2F%2Frsshub.app%2Fgithub%2Fissue%2FDIYgod%2FRSSHub"></p> <p class="path">
    路由: <code>/github/issue/:user/:repo</code></p> <div><p>
    参数:
  <ul><li class="params">user, 必选 - <span><p>用户名</p>
</span></li><li class="params">repo, 必选 - <span><p>仓库名</p>
</span></li></ul></p></div> </div> <hr> <ol start="3"><li>复杂说明支持 slot:</li></ol> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Route</span> <span class="token attr-name">author</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>DIYgod<span class="token punctuation">&quot;</span></span> <span class="token attr-name">example</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/juejin/category/frontend<span class="token punctuation">&quot;</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/juejin/category/:category<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:paramsDesc</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[<span class="token punctuation">'</span>分类名<span class="token punctuation">'</span>]<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

| 前端     | Android | iOS | 后端    | 设计   | 产品    | 工具资源 | 阅读    | 人工智能 |
| -------- | ------- | --- | ------- | ------ | ------- | -------- | ------- | -------- |
| frontend | android | ios | backend | design | product | freebie  | article | ai       |

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Route</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>结果预览：</p> <hr> <div id="/juejin/category/:category" class="routeBlock"><p class="badge"><!----> <!----> <!----> <!----> <!----> <!----> <!----></p> <p class="author">
    作者: <a href="https://github.com/DIYgod" target="_blank"> @DIYgod </a></p> <p class="example"><span>举例:</span> <a href="https://rsshub.app/juejin/category/frontend" target="_blank">https://rsshub.app/juejin/category/frontend</a> <img src="https://img.shields.io/website?label=status&amp;style=flat-square&amp;url=https%3A%2F%2Frsshub.app%2Fjuejin%2Fcategory%2Ffrontend"></p> <p class="path">
    路由: <code>/juejin/category/:category</code></p> <div><p>
    参数:
  <ul><li class="params">category, 必选 - <span><p>分类名</p>
</span></li></ul></p></div> <table><thead><tr><th>前端</th> <th>Android</th> <th>iOS</th> <th>后端</th> <th>设计</th> <th>产品</th> <th>工具资源</th> <th>阅读</th> <th>人工智能</th></tr></thead> <tbody><tr><td>frontend</td> <td>android</td> <td>ios</td> <td>backend</td> <td>design</td> <td>product</td> <td>freebie</td> <td>article</td> <td>ai</td></tr></tbody></table></div> <hr></li></ul></li> <li><p>请一定要注意把<code>&lt;Route&gt;</code>的标签关闭！</p></li> <li><p>执行 <code>npm run format</code> 自动标准化代码格式，提交代码，然后提交 pull request</p></li></ol> <h2 id="ti-jiao-xin-de-rsshub-radar-gui-ze"><a href="#ti-jiao-xin-de-rsshub-radar-gui-ze" class="header-anchor">#</a> 提交新的 RSSHub Radar 规则</h2> <h3 id="ti-jiao-xin-de-rsshub-radar-gui-ze-tiao-shi"><a href="#ti-jiao-xin-de-rsshub-radar-gui-ze-tiao-shi" class="header-anchor">#</a> 调试</h3> <p>打开浏览器扩展设置页，切换到规则列表页，下拉页面可以看到一个文本框，把新规则复制到文本框里就可以用来调试</p> <h3 id="ti-jiao-xin-de-rsshub-radar-gui-ze-bian-xie-gui-ze"><a href="#ti-jiao-xin-de-rsshub-radar-gui-ze-bian-xie-gui-ze" class="header-anchor">#</a> 编写规则</h3> <p>在 <a href="https://github.com/DIYgod/RSSHub/blob/master/assets/radar-rules.js" target="_blank" rel="noopener noreferrer">/assets/radar-rules.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 里添加规则</p> <p>下面说明中会用到的简化的规则：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
    <span class="token string">'bilibili.com'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        _name<span class="token operator">:</span> <span class="token string">'bilibili'</span><span class="token punctuation">,</span>
        www<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            title<span class="token operator">:</span> <span class="token string">'分区视频'</span><span class="token punctuation">,</span>
            docs<span class="token operator">:</span> <span class="token string">'https://docs.rsshub.app/social-media.html#bilibili'</span><span class="token punctuation">,</span>
            source<span class="token operator">:</span> <span class="token string">'/v/*tpath'</span><span class="token punctuation">,</span>
            <span class="token function-variable function">target</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">let</span> tid<span class="token punctuation">;</span>
                <span class="token keyword">switch</span> <span class="token punctuation">(</span>params<span class="token punctuation">.</span>tpath<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">case</span> <span class="token string">'douga/mad'</span><span class="token operator">:</span>
                        tid <span class="token operator">=</span> <span class="token string">'24'</span><span class="token punctuation">;</span>
                        <span class="token keyword">break</span><span class="token punctuation">;</span>
                    <span class="token keyword">default</span><span class="token operator">:</span>
                        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/bilibili/partion/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>tid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'twitter.com'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        _name<span class="token operator">:</span> <span class="token string">'Twitter'</span><span class="token punctuation">,</span>
        <span class="token string">'.'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>  <span class="token comment">// for twitter.com</span>
            title<span class="token operator">:</span> <span class="token string">'用户时间线'</span><span class="token punctuation">,</span>
            docs<span class="token operator">:</span> <span class="token string">'https://docs.rsshub.app/social-media.html#twitter'</span><span class="token punctuation">,</span>
            source<span class="token operator">:</span> <span class="token string">'/:id'</span><span class="token punctuation">,</span>
            <span class="token function-variable function">target</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>params<span class="token punctuation">.</span>id <span class="token operator">!==</span> <span class="token string">'home'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token string">'/twitter/user/:id'</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'pixiv.net'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        _name<span class="token operator">:</span> <span class="token string">'Pixiv'</span><span class="token punctuation">,</span>
        <span class="token string">'www'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            title<span class="token operator">:</span> <span class="token string">'用户收藏'</span><span class="token punctuation">,</span>
            docs<span class="token operator">:</span> <span class="token string">'https://docs.rsshub.app/social-media.html#pixiv'</span><span class="token punctuation">,</span>
            source<span class="token operator">:</span> <span class="token string">'/bookmark.php'</span><span class="token punctuation">,</span>
            <span class="token function-variable function">target</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">params<span class="token punctuation">,</span> url</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/pixiv/user/bookmarks/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'weibo.com'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        _name<span class="token operator">:</span> <span class="token string">'微博'</span><span class="token punctuation">,</span>
        <span class="token string">'.'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            title<span class="token operator">:</span> <span class="token string">'博主'</span><span class="token punctuation">,</span>
            docs<span class="token operator">:</span> <span class="token string">'https://docs.rsshub.app/social-media.html#%E5%BE%AE%E5%8D%9A'</span><span class="token punctuation">,</span>
            source<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'/u/:id'</span><span class="token punctuation">,</span> <span class="token string">'/:id'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token function-variable function">target</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">params<span class="token punctuation">,</span> url<span class="token punctuation">,</span> document</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> uid <span class="token operator">=</span> document <span class="token operator">&amp;&amp;</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>innerHTML<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\$CONFIG\['oid']='(\d+)'</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> uid <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/weibo/user/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>uid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>下面详细说明这些字段的含义及用法</p> <h4 id="ti-jiao-xin-de-rsshub-radar-gui-ze-bian-xie-gui-ze-title"><a href="#ti-jiao-xin-de-rsshub-radar-gui-ze-bian-xie-gui-ze-title" class="header-anchor">#</a> title</h4> <p>必填，路由名称</p> <p>对应 RSSHub 文档中的名称，如 <code>Twitter 用户时间线</code> 规则的 <code>title</code> 为 <code>用户时间线</code></p> <h4 id="ti-jiao-xin-de-rsshub-radar-gui-ze-bian-xie-gui-ze-docs"><a href="#ti-jiao-xin-de-rsshub-radar-gui-ze-bian-xie-gui-ze-docs" class="header-anchor">#</a> docs</h4> <p>必填，文档地址</p> <p>如 <code>Twitter 用户时间线</code> 规则的 <code>docs</code> 为 <code>https://docs.rsshub.app/social-media.html#twitter</code></p> <p>注意不是 <code>https://docs.rsshub.app/social-media.html#yong-hu-shi-jian-xian</code>，hash 应该定位到一级标题</p> <h4 id="ti-jiao-xin-de-rsshub-radar-gui-ze-bian-xie-gui-ze-source"><a href="#ti-jiao-xin-de-rsshub-radar-gui-ze-bian-xie-gui-ze-source" class="header-anchor">#</a> source</h4> <p>可选，源站路径，留空则永远不会匹配成功，只会在 <code>当前网站适用的 RSSHub 中出现</code></p> <p>如 <code>Twitter 用户时间线</code> 规则的 <code>source</code> 为 <code>/:id</code></p> <p>比如我们现在在 <code>https://twitter.com/DIYgod</code> 这个页面，<code>twitter.com/:id</code> 匹配成功，结果 params 为 <code>{id: 'DIYgod'}</code>，下一步中插件就会根据 params <code>target</code> 字段生成 RSSHub 地址</p> <p>请注意 <code>source</code> 只可以匹配 URL Path，如果参数在 URL Param 和 URL Hash 里请使用 <code>target</code></p> <h4 id="ti-jiao-xin-de-rsshub-radar-gui-ze-bian-xie-gui-ze-target"><a href="#ti-jiao-xin-de-rsshub-radar-gui-ze-bian-xie-gui-ze-target" class="header-anchor">#</a> target</h4> <p>可选，RSSHub 路径，留空则不会生成 RSSHub 路径</p> <p>对应 RSSHub 文档中的 path，如 <code>Twitter 用户时间线</code> 规则的 <code>target</code> 为 <code>/twitter/user/:id</code></p> <p>上一步中源站路径匹配出 <code>id</code> 为 <code>DIYgod</code>，则 RSSHub 路径中的 <code>:id</code> 会被替换成 <code>DIYgod</code>，匹配结果为 <code>/twitter/user/DIYgod</code>，就是我们想要的结果</p> <p>进一步，如果源站路径无法匹配出想要的参数，这时我们可以把 <code>target</code> 设为一个函数，函数有 <code>params</code> 、 <code>url</code> 和 <code>document</code> 三个参数</p> <p><code>params</code> 为上一步 <code>source</code> 匹配出来的参数，<code>url</code> 为页面 url，<code>document</code> 为页面 document</p> <p>请注意，<code>target</code> 方法运行在沙盒中，对 <code>document</code> 的任何修改都不会反应到页面中</p> <h3 id="ti-jiao-xin-de-rsshub-radar-gui-ze-rssbud"><a href="#ti-jiao-xin-de-rsshub-radar-gui-ze-rssbud" class="header-anchor">#</a> RSSBud</h3> <p><a href="https://github.com/Cay-Zhang/RSSBud" target="_blank" rel="noopener noreferrer">RSSBud<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 支持 RSSHub Radar 的规则并且也会自动更新，但是请注意：</p> <ul><li><p>在 Radar 的规则中使用 <code>'.'</code> 子域名可以让 RSSBud 适配 <code>m</code> / <code>mobile</code> 等常见移动端子域名</p></li> <li><p>在 <code>target</code> 中使用 <code>document</code> 的规则并不适用 RSSBud：RSSBud 并不是一个浏览器插件，他只获取并分析网站的 URL</p></li></ul> <h3 id="ti-jiao-xin-de-rsshub-radar-gui-ze-bu-chong-wen-dang"><a href="#ti-jiao-xin-de-rsshub-radar-gui-ze-bu-chong-wen-dang" class="header-anchor">#</a> 补充文档</h3> <p>在 RSSHub 文档里给对应路径加上 <code>radar=&quot;1&quot;</code>，这样就会显示一个 <code>支持浏览器扩展</code> 标记</p> <p>如果也支持 RSSBud，再加上 <code>rssbud=&quot;1&quot;</code>，会显示 <code>支持 RSSBud</code> 标记</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/DIYgod/RSSHub/edit/master/docs/joinus/README.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.3478587c.js" defer></script><script src="/assets/js/4.7e00e1d6.js" defer></script><script src="/assets/js/55.03826de0.js" defer></script><script src="/assets/js/9.b0a34855.js" defer></script><script src="/assets/js/5.e3683046.js" defer></script>
  </body>
</html>
