(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{576:function(e,t,a){"use strict";a.r(t);var s=a(31),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",[e._v("部署")]),e._v(" "),a("p",[e._v("部署 RSSHub 需要基本的计算机编程常识，如果您在部署过程中遇到无法解决的问题请到 "),a("a",{attrs:{href:"https://github.com/DIYgod/RSSHub/issues",target:"_blank",rel:"noopener noreferrer"}},[e._v("issues"),a("OutboundLink")],1),e._v(" 寻找类似的问题或 "),a("a",{attrs:{href:"https://github.com/DIYgod/RSSHub/issues/new/choose",target:"_blank",rel:"noopener noreferrer"}},[e._v("向我们提问"),a("OutboundLink")],1),e._v("，我们会尽快给您答复")]),e._v(" "),a("p",[e._v("部署涉及到以下基本编程常识：")]),e._v(" "),a("ol",[a("li",[e._v("命令行操作")]),e._v(" "),a("li",[a("a",{attrs:{href:"https://git-scm.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Git"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://nodejs.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Node.js"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://www.npmjs.com/get-npm",target:"_blank",rel:"noopener noreferrer"}},[e._v("npm"),a("OutboundLink")],1),e._v(" 或 "),a("a",{attrs:{href:"https://yarnpkg.com/zh-Hans/docs/install",target:"_blank",rel:"noopener noreferrer"}},[e._v("yarn"),a("OutboundLink")],1)])]),e._v(" "),a("p",[e._v("部署到可外网访问则可能涉及到：")]),e._v(" "),a("ol",[a("li",[a("a",{attrs:{href:"https://www.nginx.com/resources/wiki/start/topics/tutorials/install/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Nginx"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://www.docker.com/get-started",target:"_blank",rel:"noopener noreferrer"}},[e._v("Docker"),a("OutboundLink")],1),e._v(" 或 "),a("a",{attrs:{href:"https://docs.docker.com/compose/install/",target:"_blank",rel:"noopener noreferrer"}},[e._v("docker-compose"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://redis.io/download",target:"_blank",rel:"noopener noreferrer"}},[e._v("Redis"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://devcenter.heroku.com/articles/getting-started-with-nodejs",target:"_blank",rel:"noopener noreferrer"}},[e._v("Heroku"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://cloud.google.com/appengine/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Google App Engine"),a("OutboundLink")],1)])]),e._v(" "),a("h2",{attrs:{id:"docker-compose-bu-shu"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose-bu-shu"}},[e._v("#")]),e._v(" Docker Compose 部署")]),e._v(" "),a("h3",{attrs:{id:"docker-compose-bu-shu-an-zhuang"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose-bu-shu-an-zhuang"}},[e._v("#")]),e._v(" 安装")]),e._v(" "),a("p",[e._v("下载 "),a("a",{attrs:{href:"https://github.com/DIYgod/RSSHub/blob/master/docker-compose.yml",target:"_blank",rel:"noopener noreferrer"}},[e._v("docker-compose.yml"),a("OutboundLink")],1)]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("wget")]),e._v(" https://raw.githubusercontent.com/DIYgod/RSSHub/master/docker-compose.yml\n")])])]),a("p",[e._v("创建 volume 持久化 Redis 缓存")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ docker volume create redis-data\n")])])]),a("p",[e._v("启动")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ docker-compose up -d\n")])])]),a("h3",{attrs:{id:"docker-compose-bu-shu-geng-xin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose-bu-shu-geng-xin"}},[e._v("#")]),e._v(" 更新")]),e._v(" "),a("p",[e._v("删除旧容器")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ docker-compose down\n")])])]),a("p",[e._v("然后重复安装步骤")]),e._v(" "),a("h3",{attrs:{id:"docker-compose-bu-shu-tian-jia-pei-zhi"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose-bu-shu-tian-jia-pei-zhi"}},[e._v("#")]),e._v(" 添加配置")]),e._v(" "),a("p",[e._v("修改 "),a("a",{attrs:{href:"https://github.com/DIYgod/RSSHub/blob/master/docker-compose.yml",target:"_blank",rel:"noopener noreferrer"}},[e._v("docker-compose.yml"),a("OutboundLink")],1),e._v(" 中的 "),a("code",[e._v("environment")]),e._v(" 进行配置")]),e._v(" "),a("h2",{attrs:{id:"docker-bu-shu"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-bu-shu"}},[e._v("#")]),e._v(" Docker 部署")]),e._v(" "),a("h3",{attrs:{id:"docker-bu-shu-an-zhuang"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-bu-shu-an-zhuang"}},[e._v("#")]),e._v(" 安装")]),e._v(" "),a("p",[e._v("运行下面的命令下载 RSSHub 镜像")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ docker pull diygod/rsshub\n")])])]),a("p",[e._v("然后运行 RSSHub 即可")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ docker run -d --name rsshub -p "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1200")]),e._v(":1200 diygod/rsshub\n")])])]),a("p",[e._v("在浏览器中打开 "),a("a",{attrs:{href:"http://127.0.0.1:1200/",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://127.0.0.1:1200/"),a("OutboundLink")],1),e._v("，enjoy it! ✅")]),e._v(" "),a("p",[e._v("您可以使用下面的命令来关闭 RSSHub")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ docker stop rsshub\n")])])]),a("h3",{attrs:{id:"docker-bu-shu-geng-xin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-bu-shu-geng-xin"}},[e._v("#")]),e._v(" 更新")]),e._v(" "),a("p",[e._v("删除旧容器")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ docker stop rsshub\n$ docker "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("rm")]),e._v(" rsshub\n")])])]),a("p",[e._v("然后重复安装步骤")]),e._v(" "),a("h3",{attrs:{id:"docker-bu-shu-tian-jia-pei-zhi"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-bu-shu-tian-jia-pei-zhi"}},[e._v("#")]),e._v(" 添加配置")]),e._v(" "),a("p",[e._v("配置运行在 docker 中的 RSSHub，最便利的方法是使用 docker 环境变量")]),e._v(" "),a("p",[e._v("以设置缓存时间为 1 小时举例，只需要在运行时增加参数："),a("code",[e._v("-e CACHE_EXPIRE=3600")])]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ docker run -d --name rsshub -p "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1200")]),e._v(":1200 -e "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("CACHE_EXPIRE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("3600")]),e._v(" -e "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("GITHUB_ACCESS_TOKEN")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("example diygod/rsshub\n")])])]),a("p",[e._v("该部署方式不包括 puppeteer 和 redis 依赖，如有需要请改用 Docker Compose 部署方式或自行部署外部依赖")]),e._v(" "),a("p",[e._v("更多配置项请看 "),a("a",{attrs:{href:"#pei-zhi"}},[e._v("#配置")])]),e._v(" "),a("h2",{attrs:{id:"ansible-bu-shu"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ansible-bu-shu"}},[e._v("#")]),e._v(" Ansible 部署")]),e._v(" "),a("p",[e._v("这个 Ansible playbook 包括了 RSSHub, Redis, browserless (依赖 Docker) 以及 Caddy 2")]),e._v(" "),a("p",[e._v("目前只支持 Ubuntu 20.04")]),e._v(" "),a("p",[e._v("需要 sudo 权限和虚拟化能力（Docker 将会被自动安装）")]),e._v(" "),a("h3",{attrs:{id:"ansible-bu-shu-an-zhuang"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ansible-bu-shu-an-zhuang"}},[e._v("#")]),e._v(" 安装")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("apt")]),e._v(" update\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("apt")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" ansible\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" clone https://github.com/DIYgod/RSSHub.git ~/RSSHub\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" ~/RSSHub/scripts/ansible\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" ansible-playbook rsshub.yaml\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 当提示输入 domain name 的时候，输入该主机所使用的域名")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 举例：如果您的 RSSHub 用户使用 https://rsshub.exmaple.com 访问您的 RSSHub 实例，输入 rsshub.exmaple.com（去掉 https://）")]),e._v("\n")])])]),a("h3",{attrs:{id:"ansible-bu-shu-geng-xin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ansible-bu-shu-geng-xin"}},[e._v("#")]),e._v(" 更新")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" ~/RSSHub/scripts/ansible\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" ansible-playbook rsshub.yaml\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 当提示输入 domain name 的时候，输入该主机所使用的域名")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 举例：如果您的 RSSHub 用户使用 https://rsshub.exmaple.com 访问您的 RSSHub 实例，输入 rsshub.exmaple.com（去掉 https://）")]),e._v("\n")])])]),a("h2",{attrs:{id:"shou-dong-bu-shu"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#shou-dong-bu-shu"}},[e._v("#")]),e._v(" 手动部署")]),e._v(" "),a("p",[e._v("部署 "),a("code",[e._v("RSSHub")]),e._v(" 最直接的方式，您可以按照以下步骤将 "),a("code",[e._v("RSSHub")]),e._v(" 部署在您的电脑、服务器或者其他任何地方")]),e._v(" "),a("h3",{attrs:{id:"shou-dong-bu-shu-an-zhuang"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#shou-dong-bu-shu-an-zhuang"}},[e._v("#")]),e._v(" 安装")]),e._v(" "),a("p",[e._v("首先是下载 "),a("code",[e._v("RSSHub")]),e._v(" 的源码")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" clone https://github.com/DIYgod/RSSHub.git\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" RSSHub\n")])])]),a("p",[e._v("下载完成后，需要安装依赖（开发不要加 "),a("code",[e._v("--production")]),e._v(" 参数）")]),e._v(" "),a("p",[e._v("使用 "),a("code",[e._v("npm")])]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" --production\n")])])]),a("p",[e._v("或 "),a("code",[e._v("yarn")])]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("yarn")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" --production\n")])])]),a("p",[e._v("由于众所周知的原因，在中国使用 "),a("code",[e._v("npm")]),e._v(" 下载依赖十分缓慢，建议挂一个代理或者考虑使用 "),a("a",{attrs:{href:"https://npm.taobao.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("NPM 镜像"),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("然后在 "),a("code",[e._v("RSSHub")]),e._v(" 文件夹中运行下面的命令就可以启动")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" start\n")])])]),a("p",[e._v("或")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("yarn")]),e._v(" start\n")])])]),a("p",[e._v("或使用 "),a("a",{attrs:{href:"https://pm2.keymetrics.io/docs/usage/quick-start/",target:"_blank",rel:"noopener noreferrer"}},[e._v("PM2"),a("OutboundLink")],1)]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ pm2 start lib/index.js --name rsshub\n")])])]),a("p",[e._v("在浏览器中打开 "),a("a",{attrs:{href:"http://127.0.0.1:1200/",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://127.0.0.1:1200/"),a("OutboundLink")],1),e._v("，enjoy it! ✅")]),e._v(" "),a("p",[e._v("详细使用说明参照 "),a("a",{attrs:{href:"https://docs.rsshub.app/",target:"_blank",rel:"noopener noreferrer"}},[e._v("指南"),a("OutboundLink")],1),e._v("，替换所有路由例子中的 "),a("code",[e._v("https://rsshub.app/")]),e._v(" 为 "),a("code",[e._v("http://localhost:1200")]),e._v(" 即可正常使用")]),e._v(" "),a("h3",{attrs:{id:"shou-dong-bu-shu-tian-jia-pei-zhi"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#shou-dong-bu-shu-tian-jia-pei-zhi"}},[e._v("#")]),e._v(" 添加配置")]),e._v(" "),a("p",[e._v("可以通过设置环境变量来配置 RSSHub")]),e._v(" "),a("p",[e._v("在项目根目录新建一个 "),a("code",[e._v(".env")]),e._v(" 文件，每行以 "),a("code",[e._v("NAME=VALUE")]),e._v(" 格式添加环境变量，例如")]),e._v(" "),a("div",{staticClass:"language-env extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("    CACHE_TYPE=redis\n    CACHE_EXPIRE=600\n")])])]),a("p",[e._v("注意它不会覆盖已有的环境变量，更多规则请参考 "),a("a",{attrs:{href:"https://github.com/motdotla/dotenv",target:"_blank",rel:"noopener noreferrer"}},[e._v("dotenv"),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("该部署方式不包括 puppeteer 和 redis 依赖，如有需要请改用 Docker Compose 部署方式或自行部署外部依赖")]),e._v(" "),a("p",[e._v("更多配置项请看 "),a("a",{attrs:{href:"#pei-zhi"}},[e._v("#配置")])]),e._v(" "),a("h3",{attrs:{id:"shou-dong-bu-shu-geng-xin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#shou-dong-bu-shu-geng-xin"}},[e._v("#")]),e._v(" 更新")]),e._v(" "),a("p",[e._v("在 "),a("code",[e._v("RSSHub")]),e._v(" 文件夹中运行下面的命令就从 github 仓库拉取最新版本")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" pull\n")])])]),a("p",[e._v("然后重复安装步骤。")]),e._v(" "),a("h3",{attrs:{id:"shou-dong-bu-shu-nix-yong-hu-ti-shi"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#shou-dong-bu-shu-nix-yong-hu-ti-shi"}},[e._v("#")]),e._v(" Nix 用户提示")]),e._v(" "),a("p",[e._v("通过 "),a("code",[e._v("nix-shell")]),e._v(" 配置简化安装 nodejs, yarn 和 jieba：")]),e._v(" "),a("div",{staticClass:"language-nix extra-class"},[a("pre",{pre:!0,attrs:{class:"language-nix"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("let")]),e._v("\n    pkgs "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("import")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("nixpkgs"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    node "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" pkgs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("nodejs"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("12_x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("in")]),e._v(" pkgs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("stdenv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("mkDerivation "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    name "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"nodejs-yarn-jieba"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    buildInputs "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("node pkgs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("yarn pkgs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("pythonPackages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("jieba"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("h2",{attrs:{id:"bu-shu-dao-heroku"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bu-shu-dao-heroku"}},[e._v("#")]),e._v(" 部署到 Heroku")]),e._v(" "),a("h3",{attrs:{id:"bu-shu-dao-heroku-yi-jian-bu-shu-wu-zi-dong-geng-xin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bu-shu-dao-heroku-yi-jian-bu-shu-wu-zi-dong-geng-xin"}},[e._v("#")]),e._v(" 一键部署（无自动更新）")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://heroku.com/deploy?template=https%3A%2F%2Fgithub.com%2FDIYgod%2FRSSHub",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://www.herokucdn.com/deploy/button.svg",alt:"Deploy to Heroku"}}),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"bu-shu-dao-heroku-zi-dong-geng-xin-bu-shu"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bu-shu-dao-heroku-zi-dong-geng-xin-bu-shu"}},[e._v("#")]),e._v(" 自动更新部署")]),e._v(" "),a("ol",[a("li",[e._v("将 RSSHub "),a("a",{attrs:{href:"https://github.com/login?return_to=%2FDIYgod%2FRSSHub",target:"_blank",rel:"noopener noreferrer"}},[e._v("分叉（fork）"),a("OutboundLink")],1),e._v(" 到自己的账户下。")]),e._v(" "),a("li",[e._v("把自己的分叉部署到 Heroku："),a("code",[e._v("https://heroku.com/deploy?template=URL")]),e._v("，其中 "),a("code",[e._v("URL")]),e._v(" 改为分叉地址 （例如 "),a("code",[e._v("https://github.com/USERNAME/RSSHub")]),e._v(")。")]),e._v(" "),a("li",[e._v("检查 Heroku 设置，随代码库更新自动部署。")]),e._v(" "),a("li",[e._v("安装 "),a("a",{attrs:{href:"https://github.com/apps/pull",target:"_blank",rel:"noopener noreferrer"}},[e._v("Pull"),a("OutboundLink")],1),e._v(" 应用，定期将 RSSHub 改动自动同步至你的分叉。")])]),e._v(" "),a("h2",{attrs:{id:"bu-shu-dao-vercel-zeit-now"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bu-shu-dao-vercel-zeit-now"}},[e._v("#")]),e._v(" 部署到 Vercel (Zeit Now)")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://vercel.com/import/project?template=https://github.com/DIYgod/RSSHub",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://vercel.com/button",alt:"Deploy to Vercel"}}),a("OutboundLink")],1)]),e._v(" "),a("h2",{attrs:{id:"bu-shu-dao-google-app-engine"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bu-shu-dao-google-app-engine"}},[e._v("#")]),e._v(" 部署到 Google App Engine")]),e._v(" "),a("h3",{attrs:{id:"bu-shu-dao-google-app-engine-zhun-bei"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bu-shu-dao-google-app-engine-zhun-bei"}},[e._v("#")]),e._v(" 准备")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://cloud.google.com/appengine/docs/flexible/nodejs/quickstart",target:"_blank",rel:"noopener noreferrer"}},[e._v("Before you begin"),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("按照这里的引导完成 GCP 账号设置，创建 GCP 项目，创建 App Engine 项目，开通付费功能（必须），安装 git 与 gcloud 工具。并完成 gcloud 工具的初始化，初始化具体方式 "),a("a",{attrs:{href:"https://cloud.google.com/sdk/gcloud/?hl=zh-CN",target:"_blank",rel:"noopener noreferrer"}},[e._v("请查看这个链接"),a("OutboundLink")],1),e._v("。如果你不打算在本地调试本项目，可以不安装 Node.js 环境。")]),e._v(" "),a("p",[e._v("请注意，GAE 免费用量不支持 Flexible Environment，部署到 Flexible Environment 前请确认收费标准。")]),e._v(" "),a("p",[e._v("Node.JS 的 standard environment 仍在测试中，您可能会在部署或使用中遇到某些不可预期的问题。")]),e._v(" "),a("p",[e._v("运行 "),a("code",[e._v("git clone https://github.com/DIYgod/RSSHub.git")]),e._v(" 拉取本项目的最新版本。")]),e._v(" "),a("h3",{attrs:{id:"bu-shu-dao-google-app-engine-app-yaml-pei-zhi"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bu-shu-dao-google-app-engine-app-yaml-pei-zhi"}},[e._v("#")]),e._v(" app.yaml 配置")]),e._v(" "),a("h4",{attrs:{id:"bu-shu-dao-google-app-engine-app-yaml-pei-zhi-bu-shu-dao-flexible-environment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bu-shu-dao-google-app-engine-app-yaml-pei-zhi-bu-shu-dao-flexible-environment"}},[e._v("#")]),e._v(" 部署到 Flexible Environment")]),e._v(" "),a("p",[e._v("在 RSSHub 项目根目录下建立一个 app.yaml 文件，内容示例如下：")]),e._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# [START app_yaml]")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("runtime")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" custom\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("env")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" flex\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# This sample incurs costs to run on the App Engine flexible environment.")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# The settings below are to reduce costs during testing and are not appropriate")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# for production use. For more information, see:")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# https://cloud.google.com/appengine/docs/flexible/nodejs/configuring-your-app-with-app-yaml")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("manual_scaling")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("instances")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 以下是 app engine 资源配置，可以自行修改，硬盘最低为 10G")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("resources")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("cpu")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("memory_gb")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0.5")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("disk_size_gb")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("10")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("network")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("forwarded_ports")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" 80"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1200")]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" 443"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1200")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 以下是环境配置示例，具体可配置项见本文档配置章节")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("env_variables")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("CACHE_EXPIRE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'300'")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# [END app_yaml]")]),e._v("\n")])])]),a("h4",{attrs:{id:"bu-shu-dao-google-app-engine-app-yaml-pei-zhi-bu-shu-dao-standard-environment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bu-shu-dao-google-app-engine-app-yaml-pei-zhi-bu-shu-dao-standard-environment"}},[e._v("#")]),e._v(" 部署到 standard environment")]),e._v(" "),a("p",[e._v("在 RSSHub 项目根目录下建立一个 app.yaml 文件，内容示例如下：")]),e._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# [START app_yaml]")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("runtime")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" nodejs8\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("network")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("forwarded_ports")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" 80"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1200")]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" 443"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1200")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 以下是环境配置示例，具体可配置项见本文档配置章节")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("env_variables")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("CACHE_EXPIRE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'300'")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# [END app_yaml]")]),e._v("\n")])])]),a("h3",{attrs:{id:"bu-shu-dao-google-app-engine-an-zhuang"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bu-shu-dao-google-app-engine-an-zhuang"}},[e._v("#")]),e._v(" 安装")]),e._v(" "),a("p",[e._v("在 RSSHub 项目根目录下运行")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("gcloud app deploy\n")])])]),a("p",[e._v("进行项目部署，如果您需要变更 app.yaml 文件名称或者变更部署的项目 ID 或者指定版本号等，请参考 "),a("a",{attrs:{href:"https://cloud.google.com/appengine/docs/flexible/nodejs/testing-and-deploying-your-app#deploying_a_service_2",target:"_blank",rel:"noopener noreferrer"}},[e._v("Deploying a service"),a("OutboundLink")],1),e._v("。")]),e._v(" "),a("p",[e._v("部署完成后可访问您的 Google App Engine URL 查看部署情况。")]),e._v(" "),a("h2",{attrs:{id:"play-with-docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#play-with-docker"}},[e._v("#")]),e._v(" Play with Docker")]),e._v(" "),a("p",[e._v("如果想要测试因为反爬规则导致无法访问的路由，您可以点击下方按钮拉起一套免费，临时，专属于您的 RSSHub")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://labs.play-with-docker.com/?stack=https://raw.githubusercontent.com/DIYgod/RSSHub/master/docker-compose.yml",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://raw.githubusercontent.com/play-with-docker/stacks/master/assets/images/button.png",alt:"Try in PWD"}}),a("OutboundLink")],1)]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("注意")]),e._v(" "),a("ul",[a("li",[e._v("需要 "),a("a",{attrs:{href:"https://hub.docker.com",target:"_blank",rel:"noopener noreferrer"}},[e._v("DockerHub"),a("OutboundLink")],1),e._v(" 账号")]),e._v(" "),a("li",[a("a",{attrs:{href:"https://labs.play-with-docker.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Play with Docker"),a("OutboundLink")],1),e._v(" 一次仅能使用 4 小时，不能作为持久化解决方案，应当用于测试 / 验证路由规则")]),e._v(" "),a("li",[e._v("如果部署完成后不能看到自动识别的端口，请手动点击顶部按钮"),a("code",[e._v("open port")]),e._v("并输入"),a("code",[e._v("1200")])]),e._v(" "),a("li",[e._v("有的时候 PWD 会抽风，如果遇到点击"),a("code",[e._v("Start")]),e._v("后空白页面，或者拉起失败，请重试")])])]),e._v(" "),a("h2",{attrs:{id:"pei-zhi"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pei-zhi"}},[e._v("#")]),e._v(" 配置")]),e._v(" "),a("p",[e._v("通过设置环境变量来配置 RSSHub")]),e._v(" "),a("h3",{attrs:{id:"pei-zhi-huan-cun-pei-zhi"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pei-zhi-huan-cun-pei-zhi"}},[e._v("#")]),e._v(" 缓存配置")]),e._v(" "),a("p",[e._v("RSSHub 支持 "),a("code",[e._v("memory")]),e._v(" 和 "),a("code",[e._v("redis")]),e._v(" 两种缓存方式")]),e._v(" "),a("p",[a("code",[e._v("CACHE_TYPE")]),e._v(": 缓存类型，可为 "),a("code",[e._v("memory")]),e._v(" 和 "),a("code",[e._v("redis")]),e._v("，设为空可以禁止缓存，默认为 "),a("code",[e._v("memory")])]),e._v(" "),a("p",[a("code",[e._v("CACHE_EXPIRE")]),e._v(": 路由缓存过期时间，单位为秒，默认 "),a("code",[e._v("5 * 60")])]),e._v(" "),a("p",[a("code",[e._v("CACHE_CONTENT_EXPIRE")]),e._v(": 内容缓存过期时间，每次访问会重新计算过期时间，单位为秒，默认 "),a("code",[e._v("1 * 60 * 60")])]),e._v(" "),a("p",[a("code",[e._v("REDIS_URL")]),e._v(": Redis 连接地址（redis 缓存类型时有效），默认为 "),a("code",[e._v("redis://localhost:6379/")])]),e._v(" "),a("h3",{attrs:{id:"pei-zhi-dai-li-pei-zhi"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pei-zhi-dai-li-pei-zhi"}},[e._v("#")]),e._v(" 代理配置")]),e._v(" "),a("p",[e._v("部分路由反爬严格，可以配置使用代理抓取。")]),e._v(" "),a("p",[e._v("可通过"),a("strong",[e._v("代理 URI "),a("strong",[e._v("或")]),e._v("代理选项")]),e._v("两种方式来配置代理，当两种配置方式同时被设置时，RSSHub 将会使用**代理 URI **中的配置。")]),e._v(" "),a("h4",{attrs:{id:"pei-zhi-dai-li-pei-zhi-dai-li-uri"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pei-zhi-dai-li-pei-zhi-dai-li-uri"}},[e._v("#")]),e._v(" 代理 URI")]),e._v(" "),a("p",[a("code",[e._v("PROXY_URI")]),e._v(": 代理 URI，支持 socks4, socks5（本地查询域名的 SOCKS5，不推荐使用）, socks5h（传域名的 SOCKS5，推荐使用，以防止 DNS 污染或 DNS 泄露）, http, https，具体以"),a("a",{attrs:{href:"https://www.npmjs.com/package/socks-proxy-agent",target:"_blank",rel:"noopener noreferrer"}},[e._v("socks-proxy-agent"),a("OutboundLink")],1),e._v(" NPM 包的支持为准，也可参考"),a("a",{attrs:{href:"https://daniel.haxx.se/blog/2020/05/26/curl-ootw-socks5/",target:"_blank",rel:"noopener noreferrer"}},[e._v("curl 中 SOCKS 代理协议的用法"),a("OutboundLink")],1),e._v("。")]),e._v(" "),a("blockquote",[a("p",[e._v("代理 URI 的格式为：")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("{protocol}://{host}:{port}")])]),e._v(" "),a("li",[a("code",[e._v("{protocol}://{username}:{password}@{host}:{port}")]),e._v(" （带身份凭证）")])]),e._v(" "),a("p",[e._v("一些示例：")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("socks4://127.0.0.1:1080")])]),e._v(" "),a("li",[a("code",[e._v("socks5h://user:pass@127.0.0.1:1080")]),e._v(" （用户名为 "),a("code",[e._v("user")]),e._v(", 密码为 "),a("code",[e._v("pass")]),e._v(")")]),e._v(" "),a("li",[a("code",[e._v("socks://127.0.0.1:1080")]),e._v(" (protocol 为 socks 时表示 "),a("code",[e._v("socks5h")]),e._v(")")]),e._v(" "),a("li",[a("code",[e._v("http://127.0.0.1:8080")])]),e._v(" "),a("li",[a("code",[e._v("http://user:pass@127.0.0.1:8080")])]),e._v(" "),a("li",[a("code",[e._v("https://127.0.0.1:8443")])])])]),e._v(" "),a("h4",{attrs:{id:"pei-zhi-dai-li-pei-zhi-dai-li-xuan-xiang"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pei-zhi-dai-li-pei-zhi-dai-li-xuan-xiang"}},[e._v("#")]),e._v(" 代理选项")]),e._v(" "),a("p",[a("code",[e._v("PROXY_PROTOCOL")]),e._v(": 使用代理，支持 socks，http，https")]),e._v(" "),a("p",[a("code",[e._v("PROXY_HOST")]),e._v(": 代理服务器域名或 IP")]),e._v(" "),a("p",[a("code",[e._v("PROXY_PORT")]),e._v(": 代理服务器端口")]),e._v(" "),a("p",[a("code",[e._v("PROXY_AUTH")]),e._v(": 给代理服务器的身份验证凭证，"),a("code",[e._v("Proxy-Authorization: Basic ${process.env.PROXY_AUTH}")])]),e._v(" "),a("p",[a("code",[e._v("PROXY_URL_REGEX")]),e._v(": 启用代理的 URL 正则表达式，默认全部开启 "),a("code",[e._v(".*")])]),e._v(" "),a("h3",{attrs:{id:"pei-zhi-yong-hu-ren-zheng"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pei-zhi-yong-hu-ren-zheng"}},[e._v("#")]),e._v(" 用户认证")]),e._v(" "),a("p",[a("code",[e._v("protected_route.js")]),e._v(" 内的路由将启用 HTTP Basic Authentication 认证")]),e._v(" "),a("p",[e._v("支持该认证协议的阅读器，在添加源地址时，需要在源地址前添加认证信息，例如："),a("code",[e._v("http://usernam3:passw0rd@rsshub.app/protected/rsshub/routes")]),e._v("。")]),e._v(" "),a("p",[e._v("对于不支持该认证协议的阅读器，请参考 "),a("a",{attrs:{href:"#fang-wen-kong-zhi-pei-zhi"}},[e._v("访问控制配置")]),e._v("。")]),e._v(" "),a("p",[a("code",[e._v("HTTP_BASIC_AUTH_NAME")]),e._v(": Http basic authentication 用户名，默认为 "),a("code",[e._v("usernam3")]),e._v("，请务必修改")]),e._v(" "),a("p",[a("code",[e._v("HTTP_BASIC_AUTH_PASS")]),e._v(": Http basic authentication 密码，默认为 "),a("code",[e._v("passw0rd")]),e._v("，请务必修改")]),e._v(" "),a("h3",{attrs:{id:"pei-zhi-kua-yu-qing-qiu"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pei-zhi-kua-yu-qing-qiu"}},[e._v("#")]),e._v(" 跨域请求")]),e._v(" "),a("p",[e._v("RSSHub 默认对跨域请求限制为当前连接所在的域名，即不允许跨域。可以通过 "),a("code",[e._v("ALLOW_ORIGIN: *")]),e._v(" 或者 "),a("code",[e._v("ALLOW_ORIGIN: www.example.com")]),e._v(" 以对跨域访问进行修改。")]),e._v(" "),a("h3",{attrs:{id:"pei-zhi-fang-wen-kong-zhi-pei-zhi"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pei-zhi-fang-wen-kong-zhi-pei-zhi"}},[e._v("#")]),e._v(" 访问控制配置")]),e._v(" "),a("p",[e._v("RSSHub 支持使用访问密钥 / 码，白名单和黑名单三种方式进行访问控制。开启任意选项将会激活全局访问控制，没有访问权限将会导致访问被拒绝。同时可以通过 "),a("code",[e._v("ALLOW_LOCALHOST: true")]),e._v(" 赋予所有本地 IP 访问权限。")]),e._v(" "),a("h4",{attrs:{id:"pei-zhi-fang-wen-kong-zhi-pei-zhi-hei-bai-ming-dan"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pei-zhi-fang-wen-kong-zhi-pei-zhi-hei-bai-ming-dan"}},[e._v("#")]),e._v(" 黑白名单")]),e._v(" "),a("ul",[a("li",[a("p",[a("code",[e._v("WHITELIST")]),e._v(": 白名单，设置白名单后黑名单无效")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("BLACKLIST")]),e._v(": 黑名单")])])]),e._v(" "),a("p",[e._v("黑白名单支持 IP、路由和 UA，模糊匹配，设置多项时用英文逗号 "),a("code",[e._v(",")]),e._v(" 隔开，例如 "),a("code",[e._v("WHITELIST=1.1.1.1,2.2.2.2,/qdaily/column/59")])]),e._v(" "),a("h4",{attrs:{id:"pei-zhi-fang-wen-kong-zhi-pei-zhi-fang-wen-mi-yue-ma"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pei-zhi-fang-wen-kong-zhi-pei-zhi-fang-wen-mi-yue-ma"}},[e._v("#")]),e._v(" 访问密钥 / 码")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("ACCESS_KEY")]),e._v(": 访问密钥，用于直接访问所有路由或者生成访问码")])]),e._v(" "),a("p",[e._v("访问码为 访问密钥 + 路由 共同生成的 md5，例如：")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("访问密钥")]),e._v(" "),a("th",[e._v("路由")]),e._v(" "),a("th",[e._v("生成过程")]),e._v(" "),a("th",[e._v("访问码")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("ILoveRSSHub")]),e._v(" "),a("td",[e._v("/qdaily/column/59")]),e._v(" "),a("td",[e._v("md5('/qdaily/column/59' + 'ILoveRSSHub')")]),e._v(" "),a("td",[e._v("0f820530128805ffc10351f22b5fd121")])])])]),e._v(" "),a("ul",[a("li",[a("p",[e._v("此时可以通过 "),a("code",[e._v("code")]),e._v(" 访问路由，例如："),a("a",{attrs:{href:"https://rsshub.app/qdaily/column/59?code=0f820530128805ffc10351f22b5fd121",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://rsshub.app/qdaily/column/59?code=0f820530128805ffc10351f22b5fd121"),a("OutboundLink")],1)])]),e._v(" "),a("li",[a("p",[e._v("或使用访问密钥 "),a("code",[e._v("key")]),e._v(" 直接访问所有路由，例如："),a("a",{attrs:{href:"https://rsshub.app/qdaily/column/59?key=ILoveRSSHub",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://rsshub.app/qdaily/column/59?key=ILoveRSSHub"),a("OutboundLink")],1)])])]),e._v(" "),a("p",[e._v("访问密钥 / 码与黑白名单的访问控制关系如下：")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th"),e._v(" "),a("th",[e._v("正确访问密钥 / 码")]),e._v(" "),a("th",[e._v("错误访问密钥 / 码")]),e._v(" "),a("th",[e._v("无访问密钥 / 码")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("在白名单中")]),e._v(" "),a("td",[e._v("✅")]),e._v(" "),a("td",[e._v("✅")]),e._v(" "),a("td",[e._v("✅")])]),e._v(" "),a("tr",[a("td",[e._v("在黑名单中")]),e._v(" "),a("td",[e._v("✅")]),e._v(" "),a("td",[e._v("❌")]),e._v(" "),a("td",[e._v("❌")])]),e._v(" "),a("tr",[a("td",[e._v("无黑白名单")]),e._v(" "),a("td",[e._v("✅")]),e._v(" "),a("td",[e._v("❌")]),e._v(" "),a("td",[e._v("❌")])])])]),e._v(" "),a("h3",{attrs:{id:"pei-zhi-qi-ta-ying-yong-pei-zhi"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pei-zhi-qi-ta-ying-yong-pei-zhi"}},[e._v("#")]),e._v(" 其他应用配置")]),e._v(" "),a("p",[a("code",[e._v("PORT")]),e._v(": 监听端口，默认为 "),a("code",[e._v("1200")])]),e._v(" "),a("p",[a("code",[e._v("SOCKET")]),e._v(": 监听 Unix Socket，默认 "),a("code",[e._v("null")])]),e._v(" "),a("p",[a("code",[e._v("LISTEN_INADDR_ANY")]),e._v(": 是否允许公网连接，默认 "),a("code",[e._v("1")])]),e._v(" "),a("p",[a("code",[e._v("TITLE_LENGTH_LIMIT")]),e._v(": 限制输出标题的字节长度，一个英文字符的长度为 1 字节，部分语言如中文，日文，韩文或阿拉伯文等，统一算作 2 字节，默认 "),a("code",[e._v("100")])]),e._v(" "),a("p",[a("code",[e._v("REQUEST_RETRY")]),e._v(": 请求失败重试次数，默认 "),a("code",[e._v("2")])]),e._v(" "),a("p",[a("code",[e._v("REQUEST_TIMEOUT")]),e._v(": 请求超时毫秒数，默认 "),a("code",[e._v("3000")])]),e._v(" "),a("p",[a("code",[e._v("DEBUG_INFO")]),e._v(": 是否在首页显示路由信息。值为非 "),a("code",[e._v("true")]),e._v(" "),a("code",[e._v("false")]),e._v(" 时，在请求中带上参数 "),a("code",[e._v("debug")]),e._v(" 开启显示，例如："),a("a",{attrs:{href:"https://rsshub.app/?debug=value_of_DEBUG_INFO",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://rsshub.app/?debug=value_of_DEBUG_INFO"),a("OutboundLink")],1),e._v(" 。默认 "),a("code",[e._v("true")])]),e._v(" "),a("p",[a("code",[e._v("NODE_ENV")]),e._v(": 是否显示错误输出，默认 "),a("code",[e._v("production")]),e._v(" （即关闭输出）")]),e._v(" "),a("p",[a("code",[e._v("LOGGER_LEVEL")]),e._v(": 指明输出到 console 和日志文件的日志的最大 "),a("a",{attrs:{href:"https://github.com/winstonjs/winston#logging-levels",target:"_blank",rel:"noopener noreferrer"}},[e._v("等级"),a("OutboundLink")],1),e._v("，默认 "),a("code",[e._v("info")])]),e._v(" "),a("p",[a("code",[e._v("NODE_NAME")]),e._v(": 节点名，用于负载均衡，识别当前节点")]),e._v(" "),a("p",[a("code",[e._v("PUPPETEER_WS_ENDPOINT")]),e._v(": 用于 puppeteer.connect 的浏览器 websocket 链接，见 "),a("a",{attrs:{href:"https://zhaoqize.github.io/puppeteer-api-zh_CN/#?product=Puppeteer&version=v1.14.0&show=api-browserwsendpoint",target:"_blank",rel:"noopener noreferrer"}},[e._v("browserWSEndpoint"),a("OutboundLink")],1)]),e._v(" "),a("p",[a("code",[e._v("SENTRY")]),e._v(": "),a("a",{attrs:{href:"https://sentry.io",target:"_blank",rel:"noopener noreferrer"}},[e._v("Sentry"),a("OutboundLink")],1),e._v(" dsn，用于错误追踪")]),e._v(" "),a("p",[a("code",[e._v("SENTRY_ROUTE_TIMEOUT")]),e._v(": 路由耗时超过此毫秒值上报 Sentry，默认 "),a("code",[e._v("3000")])]),e._v(" "),a("p",[a("code",[e._v("DISALLOW_ROBOT")]),e._v(": 阻止搜索引擎收录，默认开启，设置 false 或 0 关闭")]),e._v(" "),a("p",[a("code",[e._v("HOTLINK_TEMPLATE")]),e._v(": 用于处理描述中图片的链接，绕过防盗链等限制，留空不生效。用法参考 "),a("a",{attrs:{href:"https://github.com/DIYgod/RSSHub/issues/2769",target:"_blank",rel:"noopener noreferrer"}},[e._v("#2769"),a("OutboundLink")],1),e._v("。可以使用 "),a("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/URL#Properties",target:"_blank",rel:"noopener noreferrer"}},[e._v("URL"),a("OutboundLink")],1),e._v(" 的所有属性，格式为 JS 变量模板。例子："),a("code",[e._v("${protocol}//${host}${pathname}")]),e._v(", "),a("code",[e._v("https://i3.wp.com/${host}${pathname}")])]),e._v(" "),a("h3",{attrs:{id:"pei-zhi-bu-fen-rss-mo-kuai-pei-zhi"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pei-zhi-bu-fen-rss-mo-kuai-pei-zhi"}},[e._v("#")]),e._v(" 部分 RSS 模块配置")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("提示")]),e._v(" "),a("p",[e._v("此处信息不完整。完整配置请参考路由对应的文档和 "),a("code",[e._v("lib/config.js")]),e._v("。")])]),e._v(" "),a("ul",[a("li",[a("p",[e._v("pixiv 全部路由："),a("a",{attrs:{href:"https://accounts.pixiv.net/signup",target:"_blank",rel:"noopener noreferrer"}},[e._v("注册地址"),a("OutboundLink")],1)]),e._v(" "),a("ul",[a("li",[a("p",[a("code",[e._v("PIXIV_REFRESHTOKEN")]),e._v(": Pixiv Refresh Token, 请参考 "),a("a",{attrs:{href:"https://gist.github.com/ZipFile/c9ebedb224406f4f11845ab700124362",target:"_blank",rel:"noopener noreferrer"}},[e._v("此文"),a("OutboundLink")],1),e._v(" 获取，或自行对客户端抓包获取")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("PIXIV_BYPASS_CDN")]),e._v(": 绕过 Pixiv 前置的 Cloudflare CDN, 使用"),a("code",[e._v("PIXIV_BYPASS_HOSTNAME")]),e._v("指示的 IP 地址访问 Pixiv API, 可以解决因 Cloudflare 机器人验证导致的登录失败问题，默认关闭，设置 true 或 1 开启")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("PIXIV_BYPASS_HOSTNAME")]),e._v(": Pixiv 源站的主机名或 IP 地址，主机名会被解析为 IPv4 地址，默认为"),a("code",[e._v("public-api.secure.pixiv.net")]),e._v("；仅在"),a("code",[e._v("PIXIV_BYPASS_CDN")]),e._v("开启时生效")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("PIXIV_BYPASS_DOH")]),e._v(": 用于解析 "),a("code",[e._v("PIXIV_BYPASS_HOSTNAME")]),e._v(" 的 DoH 端点 URL，需要兼容 Cloudflare 或 Google 的 DoH 服务的 JSON 查询格式，默认为 "),a("code",[e._v("https://1.1.1.1/dns-query")])])])])]),e._v(" "),a("li",[a("p",[e._v("pixiv fanbox 用于获取付费内容")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("FANBOX_SESSION_ID")]),e._v(": 对应 cookies 中的"),a("code",[e._v("FANBOXSESSID")]),e._v("。")])])]),e._v(" "),a("li",[a("p",[e._v("disqus 全部路由："),a("a",{attrs:{href:"https://disqus.com/api/applications/",target:"_blank",rel:"noopener noreferrer"}},[e._v("申请地址"),a("OutboundLink")],1)]),e._v(" "),a("ul",[a("li",[a("code",[e._v("DISQUS_API_KEY")]),e._v(": Disqus API")])])]),e._v(" "),a("li",[a("p",[e._v("twitter 全部路由："),a("a",{attrs:{href:"https://apps.twitter.com",target:"_blank",rel:"noopener noreferrer"}},[e._v("申请地址"),a("OutboundLink")],1)]),e._v(" "),a("ul",[a("li",[a("p",[a("code",[e._v("TWITTER_CONSUMER_KEY")]),e._v(": Twitter API key，支持多个 key，用英文逗号 "),a("code",[e._v(",")]),e._v(" 隔开")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("TWITTER_CONSUMER_SECRET")]),e._v(": Twitter API key secret，支持多个 key，用英文逗号 "),a("code",[e._v(",")]),e._v(" 隔开，顺序与 key 对应")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("TWITTER_TOKEN_{handler}")]),e._v(": 对应 Twitter 用户名生成的 token，"),a("code",[e._v("{handler}")]),e._v(" 替换为用于生成该 token 的 Twitter 用户名，值为 "),a("code",[e._v("Twitter API key, Twitter API key secret, Access token, Access token secret")]),e._v(" 用逗号隔开，例如："),a("code",[e._v("TWITTER_TOKEN_RSSHub=bX1zry5nG4d1RbESQbnADpVIo,2YrD8qo9sXbB8VlYfVmo1Qtw0xsexnOliU5oZofq7aPIGou0Xx,123456789-hlkUHFYmeXrRcf6SEQciP8rP4lzmRgMgwdqIN9aK,pHcPnfa28rCIKhSICUCiaw9ppuSSl7T2f3dnGYpSM0bod")])])])])]),e._v(" "),a("li",[a("p",[e._v("youtube 全部路由："),a("a",{attrs:{href:"https://console.developers.google.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("申请地址"),a("OutboundLink")],1)]),e._v(" "),a("ul",[a("li",[a("code",[e._v("YOUTUBE_KEY")]),e._v(": YouTube API Key，支持多个 key，用英文逗号 "),a("code",[e._v(",")]),e._v(" 隔开")])])]),e._v(" "),a("li",[a("p",[e._v("telegram - 贴纸包路由："),a("a",{attrs:{href:"https://telegram.org/blog/bot-revolution",target:"_blank",rel:"noopener noreferrer"}},[e._v("Telegram 机器人"),a("OutboundLink")],1)]),e._v(" "),a("ul",[a("li",[a("code",[e._v("TELEGRAM_TOKEN")]),e._v(": Telegram 机器人 token")])])]),e._v(" "),a("li",[a("p",[e._v("github 全部路由："),a("a",{attrs:{href:"https://github.com/settings/tokens",target:"_blank",rel:"noopener noreferrer"}},[e._v("申请地址"),a("OutboundLink")],1)]),e._v(" "),a("ul",[a("li",[a("code",[e._v("GITHUB_ACCESS_TOKEN")]),e._v(": GitHub Access Token")])])]),e._v(" "),a("li",[a("p",[e._v("bilibili 用户关注视频动态路由")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("BILIBILI_COOKIE_{uid}")]),e._v(": 对应 uid 的 b 站用户登录后的 Cookie 值，"),a("code",[e._v("{uid}")]),e._v(" 替换为 uid，如 "),a("code",[e._v("BILIBILI_COOKIE_2267573")]),e._v("，获取方式：\n"),a("ol",[a("li",[e._v("打开 "),a("a",{attrs:{href:"https://api.vc.bilibili.com/dynamic_svr/v1/dynamic_svr/dynamic_new?uid=0&type=8",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://api.vc.bilibili.com/dynamic_svr/v1/dynamic_svr/dynamic_new?uid=0&type=8"),a("OutboundLink")],1)]),e._v(" "),a("li",[e._v("打开控制台，切换到 Network 面板，刷新")]),e._v(" "),a("li",[e._v("点击 dynamic_new 请求，找到 Cookie。(Key："),a("code",[e._v("SESSDATA")]),e._v(")")])])])])]),e._v(" "),a("li",[a("p",[e._v("语雀 全部路由："),a("a",{attrs:{href:"https://www.yuque.com/register",target:"_blank",rel:"noopener noreferrer"}},[e._v("注册地址"),a("OutboundLink")],1)]),e._v(" "),a("ul",[a("li",[a("code",[e._v("YUQUE_TOKEN")]),e._v(": 语雀 Token，"),a("a",{attrs:{href:"https://www.yuque.com/settings/tokens",target:"_blank",rel:"noopener noreferrer"}},[e._v("获取地址"),a("OutboundLink")],1),e._v("。语雀接口做了访问频率限制，为保证正常访问建议配置 Token，详见 "),a("a",{attrs:{href:"https://www.yuque.com/yuque/developer/api#5b3a1535",target:"_blank",rel:"noopener noreferrer"}},[e._v("语雀开发者文档"),a("OutboundLink")],1),e._v("。")])])]),e._v(" "),a("li",[a("p",[e._v("邮箱 邮件列表路由：")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("EMAIL_CONFIG_{email}")]),e._v(": 邮箱设置，替换 "),a("code",[e._v("{email}")]),e._v(" 为 邮箱账号，邮件账户的 "),a("code",[e._v("@")]),e._v(" 替换为 "),a("code",[e._v(".")]),e._v("，例如 "),a("code",[e._v("EMAIL_CONFIG_xxx.qq.com")]),e._v("。内容格式为 "),a("code",[e._v("password=密码&host=服务器&port=端口")]),e._v("，例如：\n"),a("ul",[a("li",[e._v("Linux 环境变量："),a("code",[e._v('EMAIL_CONFIG_xxx.qq.com="password=123456&host=imap.qq.com&port=993"')])]),e._v(" "),a("li",[e._v("docker 环境变量："),a("code",[e._v("EMAIL_CONFIG_xxx.qq.com=password=123456&host=imap.qq.com&port=993")]),e._v("，请勿添加引号 "),a("code",[e._v("'")]),e._v("，"),a("code",[e._v('"')]),e._v("。")])])])])]),e._v(" "),a("li",[a("p",[e._v("吹牛部落 栏目更新")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("CHUINIU_MEMBER")]),e._v(": 吹牛部落登录后的 x-member，获取方式\n"),a("ol",[a("li",[e._v("登陆后点开文章正文")]),e._v(" "),a("li",[e._v("打开控制台，刷新")]),e._v(" "),a("li",[e._v("找到 "),a("a",{attrs:{href:"http://api.duanshu.com/h5/content/detail/",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://api.duanshu.com/h5/content/detail/"),a("OutboundLink")],1),e._v(" 开头的请求")]),e._v(" "),a("li",[e._v("找到请求头中的 x-member")])])])])]),e._v(" "),a("li",[a("p",[e._v("微博 个人时间线路由："),a("a",{attrs:{href:"https://open.weibo.com/connect",target:"_blank",rel:"noopener noreferrer"}},[e._v("申请地址"),a("OutboundLink")],1)]),e._v(" "),a("ul",[a("li",[a("code",[e._v("WEIBO_APP_KEY")]),e._v(": 微博 App Key")]),e._v(" "),a("li",[a("code",[e._v("WEIBO_APP_SECRET")]),e._v(": 微博 App Secret")]),e._v(" "),a("li",[a("code",[e._v("WEIBO_REDIRECT_URL")]),e._v(": 微博登录授权回调地址，默认为 "),a("code",[e._v("RSSHub 地址/weibo/timeline/0")]),e._v("，自定义回调地址请确保最后可以转跳到 "),a("code",[e._v("RSSHub 地址/weibo/timeline/0?code=xxx")])])])]),e._v(" "),a("li",[a("p",[e._v("Mastodon 用户时间线路由：访问 "),a("code",[e._v("https://mastodon.example/settings/applications")]),e._v(" 申请（替换掉 "),a("code",[e._v("mastodon.example")]),e._v("）。需要 "),a("code",[e._v("read:search")]),e._v(" 权限")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("MASTODON_API_HOST")]),e._v(": API 请求的实例")]),e._v(" "),a("li",[a("code",[e._v("MASTODON_API_ACCESS_TOKEN")]),e._v(": 用户 access token, 申请应用后，在应用配置页可以看到申请者的 access token")]),e._v(" "),a("li",[a("code",[e._v("MASTODON_API_ACCT_DOMAIN")]),e._v(": 该实例本地用户 acct 标识的域名")])])]),e._v(" "),a("li",[a("p",[e._v("MiniFlux 全部路由：")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("MINIFLUX_INSTANCE")]),e._v("： 用户所用的实例，默认为 MiniFlux 官方提供的 "),a("a",{attrs:{href:"https://reader.miniflux.app",target:"_blank",rel:"noopener noreferrer"}},[e._v("付费服务地址"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("code",[e._v("MINIFLUX_TOKEN")]),e._v(": 用户的 API 密钥，请登录所用实例后于 "),a("code",[e._v("设置")]),e._v(" -> "),a("code",[e._v("API 密钥")]),e._v(" -> "),a("code",[e._v("创建一个新的 API 密钥")]),e._v(" 处获取")])])]),e._v(" "),a("li",[a("p",[e._v("饭否 全部路由："),a("a",{attrs:{href:"https://github.com/FanfouAPI/FanFouAPIDoc/wiki/Oauth",target:"_blank",rel:"noopener noreferrer"}},[e._v("申请地址"),a("OutboundLink")],1)]),e._v(" "),a("ul",[a("li",[a("code",[e._v("FANFOU_CONSUMER_KEY")]),e._v(": 饭否 Consumer Key")]),e._v(" "),a("li",[a("code",[e._v("FANFOU_CONSUMER_SECRET")]),e._v(": 饭否 Consumer Secret")]),e._v(" "),a("li",[a("code",[e._v("FANFOU_USERNAME")]),e._v(": 饭否登录用户名、邮箱、手机号")]),e._v(" "),a("li",[a("code",[e._v("FANFOU_PASSWORD")]),e._v(": 饭否密码")])])]),e._v(" "),a("li",[a("p",[e._v("Last.fm 全部路由："),a("a",{attrs:{href:"https://www.last.fm/api/",target:"_blank",rel:"noopener noreferrer"}},[e._v("申请地址"),a("OutboundLink")],1)]),e._v(" "),a("ul",[a("li",[a("code",[e._v("LASTFM_API_KEY")]),e._v(": Last.fm API Key")])])]),e._v(" "),a("li",[a("p",[e._v("北大未名 BBS 全站十大")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("PKUBBS_COOKIE")]),e._v(": BBS 注册用户登录后的 Cookie 值，获取方式：\n"),a("ol",[a("li",[e._v("登录后打开论坛首页")]),e._v(" "),a("li",[e._v("打开控制台， 刷新")]),e._v(" "),a("li",[e._v("找到 "),a("a",{attrs:{href:"https://bbs.pku.edu.cn/v2/home.php",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://bbs.pku.edu.cn/v2/home.php"),a("OutboundLink")],1),e._v(" 请求")]),e._v(" "),a("li",[e._v("找到请求头中的 Cookie")])])])])]),e._v(" "),a("li",[a("p",[e._v("nhentai torrent: "),a("a",{attrs:{href:"https://nhentai.net/register/",target:"_blank",rel:"noopener noreferrer"}},[e._v("注册地址"),a("OutboundLink")],1)]),e._v(" "),a("ul",[a("li",[a("code",[e._v("NHENTAI_USERNAME")]),e._v(": nhentai 用户名或邮箱")]),e._v(" "),a("li",[a("code",[e._v("NHENTAI_PASSWORD")]),e._v(": nhentai 密码")])])]),e._v(" "),a("li",[a("p",[e._v("discuz cookies 设定")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("DISCUZ_COOKIE_{cid}")]),e._v(": 某 Discuz 驱动的论坛，用户注册后的 Cookie 值，cid 可自由设定，取值范围 [00, 99], 使用 discuz 通用路由时，通过指定 cid 来调用该 cookie")])])]),e._v(" "),a("li",[a("p",[e._v("Sci-hub 设置，用于科学期刊路由。")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("SCIHUB_HOST")]),e._v(": 可访问的 sci-hub 镜像地址，默认为 "),a("code",[e._v("https://sci-hub.se")]),e._v("。")])])]),e._v(" "),a("li",[a("p",[e._v("端传媒设置，用于获取付费内容全文：")]),e._v(" "),a("ul",[a("li",[a("p",[a("code",[e._v("INITIUM_BEARER_TOKEN")]),e._v(": 端传媒 Web 版认证 token。获取方式：登陆后打开端传媒站内任意页面，打开浏览器开发者工具中 “网络”(Network) 选项卡，筛选 URL 找到任一个地址为"),a("code",[e._v("api.initium.com")]),e._v("开头的请求，点击检查其 “消息头”，在 “请求头” 中找到"),a("code",[e._v("Authorization")]),e._v("字段，将其值复制填入配置即可。你的配置应该形如"),a("code",[e._v("INITIUM_BEARER_TOKEN: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6JiE1NTYzNDgxNDVAcXEuY29tIiwidXNlcl9pZCI6MTM0NDIwLCJlbWFpbCI6IjE1NTYzNDgxNDVAcXEuY29tIiwiZXhwIjoxNTk0MTk5NjQ3fQ.Tqui-ORNR7d4Bh240nKy_Ldi6crfq0A78Yj2iwy2_U8'")]),e._v("。")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("INITIUM_IAP_RECEIPT")]),e._v(": 端传媒 iOS 版内购回执认证 token。获取方式：登陆后打开端传媒 iOS app 内任意页面，打开抓包工具，筛选 URL 找到任一个地址为"),a("code",[e._v("api.initium.com")]),e._v("开头的请求，点击检查其 “消息头”，在 “请求头” 中找到"),a("code",[e._v("X-IAP-Receipt")]),e._v("字段，将其值复制填入配置即可。你的配置应该形如"),a("code",[e._v("INITIUM_IAP_RECEIPT: 'ef81dee9e4e2fe084a0af1ea82da2f7b16e75f756db321618a119fa62b52550e'")]),e._v("。")])])]),e._v(" "),a("p",[e._v("Web 版认证 token 和 iOS 内购回执认证 token 只需选择其一填入即可。如果你在进行上述操作时遇到困难，亦可选择在环境设置中填写明文的用户名和密码：")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("INITIUM_USERNAME")]),e._v(": 端传媒用户名 （邮箱）")]),e._v(" "),a("li",[a("code",[e._v("INITIUM_PASSWORD")]),e._v(": 端传媒密码")])])]),e._v(" "),a("li",[a("p",[e._v("Instagram：")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("IG_USERNAME")]),e._v(": Instagram 用户名。")]),e._v(" "),a("li",[a("code",[e._v("IG_PASSWORD")]),e._v(": Instagram 密码。")]),e._v(" "),a("li",[a("code",[e._v("IG_PROXY")]),e._v(": Instagram 代理 URL。")])]),e._v(" "),a("p",[e._v("注意，暂不支持两步验证。")])]),e._v(" "),a("li",[a("p",[e._v("BTBYR")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("BTBYR_HOST")]),e._v(": 支持 ipv4 访问的 BTBYR 镜像，默认为原站 "),a("code",[e._v("https://bt.byr.cn/")]),e._v("。")]),e._v(" "),a("li",[a("code",[e._v("BTBYR_COOKIE")]),e._v(": 注册用户登录后的 Cookie 值，获取方式：\n"),a("ol",[a("li",[e._v("登录后打开网站首页")]),e._v(" "),a("li",[e._v("打开控制台，刷新")]),e._v(" "),a("li",[e._v("找到 "),a("a",{attrs:{href:"https://bt.byr.cn/index.php",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://bt.byr.cn/index.php"),a("OutboundLink")],1),e._v(" 请求")]),e._v(" "),a("li",[e._v("找到请求头中的 Cookie")])])])])]),e._v(" "),a("li",[a("p",[e._v("小宇宙：需要 App 登陆后抓包获取相应数据。")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("XIAOYUZHOU_ID")]),e._v(": 即数据包中的 "),a("code",[e._v("x-jike-device-id")]),e._v("。")]),e._v(" "),a("li",[a("code",[e._v("XIAOYUZHOU_TOKEN")]),e._v(": 即数据包中的 "),a("code",[e._v("x-jike-refresh-token")]),e._v("。")])])]),e._v(" "),a("li",[a("p",[e._v("新榜")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("NEWRANK_COOKIE")]),e._v(": 登陆后的 COOKIE 值，其中 token 是必要的，其他可删除")])])]),e._v(" "),a("li",[a("p",[e._v("NGA BBS 用于获取帖子内文")]),e._v(" "),a("ul",[a("li",[a("p",[a("code",[e._v("NGA_PASSPORT_UID")]),e._v(": 对应 cookie 中的 "),a("code",[e._v("ngaPassportUid")]),e._v(".")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("NGA_PASSPORT_CID")]),e._v(": 对应 cookie 中的 "),a("code",[e._v("ngaPassportCid")]),e._v(".")])])])]),e._v(" "),a("li",[a("p",[e._v("喜马拉雅")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("XIMALAYA_TOKEN")]),e._v(": 对应 cookie 中的 "),a("code",[e._v("1&_token")]),e._v("，获取方式：\n"),a("ol",[a("li",[e._v("登陆喜马拉雅网页版")]),e._v(" "),a("li",[e._v("打开控制台，刷新")]),e._v(" "),a("li",[e._v("查找名称为"),a("code",[e._v("1&_token")]),e._v("的"),a("code",[e._v("cookie")]),e._v("，其内容即为"),a("code",[e._v("XIMALAYA_TOKEN")]),e._v("的值（即在"),a("code",[e._v("cookie")]),e._v(" 中查找 "),a("code",[e._v("1&_token=***;")]),e._v("，并设置 "),a("code",[e._v("XIMALAYA_TOKEN = ***")]),e._v("）")])])])])]),e._v(" "),a("li",[a("p",[e._v("4399 论坛")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("GAME_4399")]),e._v(": 对应登录后的 cookie 值，获取方式：\n"),a("ol",[a("li",[e._v("在 4399 首页登录。")]),e._v(" "),a("li",[e._v("打开开发者工具，切换到 Network 面板，刷新")]),e._v(" "),a("li",[e._v("查找"),a("code",[e._v("www.4399.com")]),e._v("的访问请求，点击请求，在右侧 Headers 中找到 Cookie.")])])])])]),e._v(" "),a("li",[a("p",[e._v("滴答清单")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("DIDA365_USERNAME")]),e._v(": 滴答清单用户名")]),e._v(" "),a("li",[a("code",[e._v("DIDA365_PASSWORD")]),e._v(": 滴答清单密码")])])]),e._v(" "),a("li",[a("p",[e._v("知乎用户关注时间线")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("ZHIHU_COOKIES")]),e._v(": 知乎登录后的 cookie 值.\n"),a("ol",[a("li",[e._v("可以在知乎网页版的一些请求的请求头中找到，如 "),a("code",[e._v("GET /moments")]),e._v(" 请求头中的 "),a("code",[e._v("cookie")]),e._v(" 值.")])])])])]),e._v(" "),a("li",[a("p",[e._v("Wordpress")]),e._v(" "),a("ul",[a("li",[a("p",[a("code",[e._v("WORDPRESS_CDN")]),e._v(": 用于中转 http 图片链接。可供考虑的服务见下表：")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("url")]),e._v(" "),a("th",[e._v("backbone")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[a("a",{attrs:{href:"https://imageproxy.pimg.tw/resize?url=",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://imageproxy.pimg.tw/resize?url="),a("OutboundLink")],1)]),e._v(" "),a("td",[e._v("akamai")])]),e._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://images.weserv.nl/?url=",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://images.weserv.nl/?url="),a("OutboundLink")],1)]),e._v(" "),a("td",[e._v("cloudflare")])]),e._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://pic1.xuehuaimg.com/proxy/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://pic1.xuehuaimg.com/proxy/"),a("OutboundLink")],1)]),e._v(" "),a("td",[e._v("cloudflare")])]),e._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://cors.netnr.workers.dev/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://cors.netnr.workers.dev/"),a("OutboundLink")],1)]),e._v(" "),a("td",[e._v("cloudflare")])]),e._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://netnr-proxy.openode.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://netnr-proxy.openode.io/"),a("OutboundLink")],1)]),e._v(" "),a("td",[e._v("digitalocean")])])])])])])])])])}),[],!1,null,null,null);t.default=r.exports}}]);